{"version":3,"sources":["webpack:///debug.min.js","webpack:///webpack/bootstrap d6b5a41178bad65f2985","webpack:///./src/debug.js","webpack:///./src/splitter.js","webpack:///./src/jquery.splitter.js","webpack:///./src/css_selector_helper.js","webpack:///./~/_events@1.1.1@events/events.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_css_selector_helper","_css_selector_helper2","window","SelectorHelper","merge_name","features","element_name","forEach","f","selected","name","tag","merge_pattern","path","end","pattern","prev","i","invalid","element_pattern","trim","selector_changed","current_path","server","heightlight","render_selector_helper","helper","find","remove","elements","$","each","span","addClass","data","text","appendTo","ul","li","on","ev","stopPropagation","$this","this","removeClass","element","parents","xpath","_p","push","overlay","getElementByXpath","join","prepend","adjustHelper","scrollWidth","width","e","length","tab_web","init","_this2","_this","clear","CSSSelectorHelperServer","contentWindow","enable","is","position","top","input","select","hide","show","val","Debugger","python_editor_replace_selection","escape","tmp_div","html","splitter","trigger","height","split","orientation","limit","CodeMirror","keyMap","basic","Tab","init_python_editor","init_task_editor","bind_debug_tabs","bind_run","bind_save","bind_others","not_saved","$el","python_editor_elem","cm","python_editor","value","script_content","mode","lineNumbers","indentUnit","lineWrapping","styleActiveLine","autofocus","addEventListener","returnValue","event","content","getDoc","replaceSelection","auto_format","pos","getCursor","commands","selectAll","autoFormatRange","setCursor","format_string","div","document","createElement","getValue","task_editor","task_content","lint","clearHistory","html_styled","runMode","classname","run","execCommand","script","ajax","type","url","location","pathname","success","console","log","python_log","error","xhr","textStatus","errorThrown","responseText","bind_follows","next","hasClass","task","after","JSON","stringify","newtasks","preventDefault","task_id","setValue","task_updated","project","taskid","code","attr","status_string","toggle_webdav_mode","render_html","base_url","block_script","arguments","undefined","block_iframe","dom","DOMParser","parseFromString","encodeURI","documentElement","innerHTML","webdav_mode","iframe","content_type","fetch_result","headers","iframe_content","indexOf","parse","dataurl","doc","contentDocument","open","write","close","onreadystatechange","readyState","elem","newtask_template","follows","all_content","callback","process","replace","append","messages","click","logs","button","alert","confirm","fn","_type","$document","$blocker","$body","splitterSettings","localStorage","getItem","moveSplitter","v","props","currentPos","size","delta","settings","multiplier","prevSize","$prev","sizeProp","elSize","css","cssProp","otherCssProp","$handle","guid","setItem","timer","clearTimeout","setTimeout","resetPrev","prevAll","nextAll","$originalContainer","$parent","parent","dragging","parentOffset","offset","left","x","display","moveProp","bottom","margin-left","right","opacity","cursor","border-left","z-index","y","border","tracker","down","track","bind","pageX","pageY","target","originalEvent","touches","panel","toType","$tmp","insertBefore","otherhandles","$h","before","count","splitter_id","splitters","current_splitter","options","get_position","match","set_limit","isNaN","parseFloat","isFinite","leftUpper","rightBottom","panel_1","panel_2","extend","invisible","onDragStart","noop","onDragEnd","onDrag","percent","cls","children","first","insertAfter","self","refresh","new_width","new_height","option","n","silent","pw","sw","sw2","outerWidth","w1","eq","outerHeight","h1","isActive","destroy","unbind","removeData","not_null","closest","filter","Boolean","rightBottomLimit","changedTouches","jQuery","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","arrayEquals","a","b","l","getOffset","offsetLeft","offsetTop","offsetParent","path_info","tagName","toLowerCase","getAttribute","classList","class_name","allowed_attr_names","attrs","attributes","nodeName","nodeValue","siblings","parentNode","childNodes","ix","sibling","parentElement","reverse","selected_elements","querySelectorAll","feature_selected_elements","fi","every","defineProperty","_createClass","defineProperties","descriptor","key","protoProps","staticProps","_events","_events2","_EventEmitter","getPrototypeOf","emit","Element","concat","className","setAttribute","offsetWidth","offsetHeight","body","appendChild","_this3","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","EventEmitter","_maxListeners","isFunction","arg","isNumber","isObject","_typeof","isUndefined","Symbol","iterator","defaultMaxListeners","setMaxListeners","er","handler","len","args","listeners","Error","err","context","slice","apply","addListener","listener","newListener","warned","trace","once","g","removeListener","fired","list","splice","removeAllListeners","ret","listenerCount","evlistener","emitter"],"mappings":"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","file":"debug.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(7);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(10);\n\t\n\tvar _css_selector_helper = __webpack_require__(11);\n\t\n\tvar _css_selector_helper2 = _interopRequireDefault(_css_selector_helper);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.SelectorHelper = function () {\n\t  var helper = $('#css-selector-helper');\n\t  var server = null;\n\t\n\t  function merge_name(p) {\n\t    var features = p.features;\n\t    var element_name = '';\n\t    features.forEach(function (f) {\n\t      if (f.selected) element_name += f.name;\n\t    });\n\t    if (element_name === '') {\n\t      return p.tag;\n\t    }\n\t    return element_name;\n\t  }\n\t\n\t  function merge_pattern(path, end) {\n\t    var pattern = '';\n\t    var prev = null;\n\t    path.forEach(function (p, i) {\n\t      if (end >= 0 && i > end) {\n\t        return;\n\t      }\n\t      if (p.invalid) {\n\t        prev = null;\n\t      } else if (p.selected) {\n\t        if (prev) {\n\t          pattern += ' >';\n\t        }\n\t        var element_pattern = '';\n\t        p.features.forEach(function (f) {\n\t          if (f.selected) {\n\t            element_pattern += f.pattern;\n\t          }\n\t        });\n\t        if (element_pattern === '') {\n\t          element_pattern = '*';\n\t        }\n\t        pattern += ' ' + element_pattern;\n\t        prev = p;\n\t      } else {\n\t        prev = null;\n\t      }\n\t    });\n\t    if (pattern === '') {\n\t      pattern = '*';\n\t    }\n\t    return pattern.trim();\n\t  }\n\t\n\t  var current_path = null;\n\t  function selector_changed(path) {\n\t    current_path = path;\n\t    server.heightlight(merge_pattern(path));\n\t  }\n\t\n\t  function render_selector_helper(path) {\n\t    helper.find('.element').remove();\n\t    var elements = [];\n\t    $.each(path, function (i, p) {\n\t      var span = $('<span>').addClass('element').data('info', p);\n\t      $('<span class=\"element-name\">').text(p.name).appendTo(span);\n\t      if (p.selected) span.addClass('selected');\n\t      if (p.invalid) span.addClass('invalid');\n\t\n\t      var ul = $('<ul>');\n\t      $.each(p.features, function (i, f) {\n\t        var li = $('<li>').text(f.name).data('feature', f);\n\t        if (f.selected) li.addClass('selected');\n\t        li.appendTo(ul);\n\t        // feature on click\n\t        li.on('click', function (ev) {\n\t          ev.stopPropagation();\n\t          var $this = $(this);\n\t          var f = $this.data('feature');\n\t          if (f.selected) {\n\t            f.selected = false;\n\t            $this.removeClass('selected');\n\t          } else {\n\t            f.selected = true;\n\t            $this.addClass('selected');\n\t          }\n\t          var element = $this.parents('.element');\n\t          if (!p.selected) {\n\t            p.selected = true;\n\t            element.addClass('selected');\n\t          }\n\t          element.find('.element-name').text(merge_name(p));\n\t          selector_changed(path);\n\t        });\n\t      });\n\t      ul.appendTo(span);\n\t\n\t      span.on('mouseover', function (ev) {\n\t        var xpath = [];\n\t        $.each(path, function (i, _p) {\n\t          xpath.push(_p.xpath);\n\t          if (_p === p) {\n\t            return false;\n\t          }\n\t        });\n\t        server.overlay(server.getElementByXpath('/' + xpath.join('/')));\n\t      });\n\t      // path on click\n\t      span.on('click', function (ev) {\n\t        ev.stopPropagation();\n\t        var $this = $(this);\n\t        var p = $this.data('info');\n\t        if (p.selected) {\n\t          p.selected = false;\n\t          $this.removeClass('selected');\n\t        } else {\n\t          p.selected = true;\n\t          $this.addClass('selected');\n\t        }\n\t        $this.find('.element-name').text(merge_name($this.data('info')));\n\t        selector_changed(path);\n\t      });\n\t      elements.push(span);\n\t    });\n\t    helper.prepend(elements);\n\t\n\t    adjustHelper();\n\t    selector_changed(path);\n\t  }\n\t\n\t  function adjustHelper() {\n\t    while (helper[0].scrollWidth > helper.width()) {\n\t      var e = helper.find('.element:visible:first');\n\t      if (e.length == 0) {\n\t        return;\n\t      }\n\t      e.addClass('invalid').data('info')['invalid'] = true;\n\t    }\n\t  }\n\t\n\t  var tab_web = $('#tab-web');\n\t  return {\n\t    init: function init() {\n\t      var _this2 = this;\n\t\n\t      var _this = this;\n\t      _this.clear();\n\t\n\t      $(\"#J-enable-css-selector-helper\").on('click', function (ev) {\n\t        _this2.clear();\n\t        server = new _css_selector_helper2.default($(\"#tab-web iframe\")[0].contentWindow);\n\t        server.on('selector_helper_click', function (path) {\n\t          render_selector_helper(path);\n\t        });\n\t        _this2.enable();\n\t      });\n\t\n\t      $(\"#task-panel\").on(\"scroll\", function (ev) {\n\t        if (!helper.is(':visible')) {\n\t          return;\n\t        }\n\t        if ($(\"#debug-tabs\").position().top < 0) {\n\t          helper.addClass('fixed');\n\t          tab_web.addClass('fixed');\n\t        } else {\n\t          helper.removeClass('fixed');\n\t          tab_web.removeClass('fixed');\n\t        }\n\t      });\n\t\n\t      // copy button\n\t      var input = helper.find('.copy-selector-input');\n\t      input.on('focus', function (ev) {\n\t        $(this).select();\n\t      });\n\t      helper.find('.copy-selector').on('click', function (ev) {\n\t        if (!current_path) {\n\t          return;\n\t        }\n\t        if (input.is(':visible')) {\n\t          input.hide();\n\t          helper.find('.element').show();\n\t        } else {\n\t          helper.find('.element').hide();\n\t          input.val(merge_pattern(current_path)).show();\n\t        }\n\t      });\n\t\n\t      // add button\n\t      helper.find('.add-to-editor').on('click', function (ev) {\n\t        Debugger.python_editor_replace_selection(merge_pattern(current_path));\n\t      });\n\t    },\n\t    clear: function clear() {\n\t      current_path = null;\n\t      helper.hide();\n\t      helper.removeClass('fixed');\n\t      tab_web.removeClass('fixed');\n\t      helper.find('.element').remove();\n\t    },\n\t    enable: function enable() {\n\t      helper.show();\n\t      helper.find('.copy-selector-input').hide();\n\t      if ($(\"#debug-tabs\").position().top < 0) {\n\t        helper.addClass('fixed');\n\t        tab_web.addClass('fixed');\n\t      } else {\n\t        helper.removeClass('fixed');\n\t        tab_web.removeClass('fixed');\n\t      }\n\t    }\n\t  };\n\t}(); // vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:\n\t// Author: Binux<i@binux.me>\n\t//         http://binux.me\n\t// Created on 2014-02-23 15:19:19\n\t\n\twindow.Debugger = function () {\n\t  var tmp_div = $('<div>');\n\t  function escape(text) {\n\t    return tmp_div.text(text).html();\n\t  }\n\t\n\t  return {\n\t    init: function init() {\n\t      //init resizer\n\t      this.splitter = $(\".debug-panel:not(:first)\").splitter().data('splitter').trigger('init').on('resize-start', function () {\n\t        $('#left-area .overlay').show();\n\t      }).on('resize-end', function () {\n\t        $('#left-area .overlay').hide();\n\t      });\n\t\n\t      $('#task-panel').height('100%').width('100%').split({ orientation: 'horizontal', limit: 50, position: '40%' });\n\t      $('#debug-tabs').height('100%').width('100%').split({ orientation: 'horizontal', limit: 50, position: '40%' });\n\t\n\t      //codemirror\n\t      CodeMirror.keyMap.basic.Tab = 'indentMore';\n\t      this.init_python_editor($(\"#python-editor\"));\n\t      this.init_task_editor($(\"#task-editor\"));\n\t      this.bind_debug_tabs();\n\t      this.bind_run();\n\t      this.bind_save();\n\t      this.bind_others();\n\t\n\t      // css selector helper\n\t      SelectorHelper.init();\n\t    },\n\t\n\t    not_saved: false,\n\t    init_python_editor: function init_python_editor($el) {\n\t      var _this = this;\n\t      this.python_editor_elem = $el;\n\t      var cm = this.python_editor = CodeMirror($el[0], {\n\t        value: script_content,\n\t        mode: \"python\",\n\t        lineNumbers: true,\n\t        indentUnit: 4,\n\t        lineWrapping: true,\n\t        styleActiveLine: true,\n\t        autofocus: true\n\t      });\n\t      cm.on('focus', function () {\n\t        $el.addClass(\"focus\");\n\t      });\n\t      cm.on('blur', function () {\n\t        $el.removeClass(\"focus\");\n\t      });\n\t      cm.on('change', function () {\n\t        _this.not_saved = true;\n\t      });\n\t      window.addEventListener('beforeunload', function (e) {\n\t        if (_this.not_saved) {\n\t          var returnValue = \"You have not saved changes.\";\n\t          (e || window.event).returnValue = returnValue;\n\t          return returnValue;\n\t        }\n\t      });\n\t    },\n\t\n\t    python_editor_replace_selection: function python_editor_replace_selection(content) {\n\t      this.python_editor.getDoc().replaceSelection(content);\n\t    },\n\t\n\t    auto_format: function auto_format(cm) {\n\t      var pos = cm.getCursor(true);\n\t      CodeMirror.commands.selectAll(cm);\n\t      cm.autoFormatRange(cm.getCursor(true), cm.getCursor(false));\n\t      cm.setCursor(pos);\n\t    },\n\t\n\t    format_string: function format_string(value, mode) {\n\t      var div = document.createElement('div');\n\t      var cm = CodeMirror(div, {\n\t        value: value,\n\t        mode: mode\n\t      });\n\t      this.auto_format(cm);\n\t      return cm.getDoc().getValue();\n\t    },\n\t\n\t    init_task_editor: function init_task_editor($el) {\n\t      var cm = this.task_editor = CodeMirror($el[0], {\n\t        value: task_content,\n\t        mode: \"application/json\",\n\t        indentUnit: 2,\n\t        lineWrapping: true,\n\t        styleActiveLine: true,\n\t        lint: true\n\t      });\n\t      this.auto_format(cm);\n\t      cm.getDoc().clearHistory();\n\t      cm.on('focus', function () {\n\t        $el.addClass(\"focus\");\n\t      });\n\t      cm.on('blur', function () {\n\t        $el.removeClass(\"focus\");\n\t      });\n\t    },\n\t\n\t    bind_debug_tabs: function bind_debug_tabs() {\n\t      var _this = this;\n\t      $('#tab-control > li[data-id]').on('click', function () {\n\t        $('#tab-control > li[data-id]').removeClass('active');\n\t        var name = $(this).addClass('active').data('id');\n\t        $('#debug-tabs .tab').hide();\n\t        $('#debug-tabs #' + name).show();\n\t      });\n\t      $(\"#tab-control li[data-id=tab-html]\").on('click', function () {\n\t        if (!!!$(\"#tab-html\").data(\"format\")) {\n\t          var html_styled = \"\";\n\t          CodeMirror.runMode(_this.format_string($(\"#tab-html pre\").text(), 'text/html'), 'text/html', function (text, classname) {\n\t            if (classname) html_styled += '<span class=\"cm-' + classname + '\">' + escape(text) + '</span>';else html_styled += escape(text);\n\t          });\n\t          $(\"#tab-html pre\").html(html_styled);\n\t          $(\"#tab-html\").data(\"format\", true);\n\t        }\n\t      });\n\t    },\n\t\n\t    bind_run: function bind_run() {\n\t      var _this = this;\n\t      $('#run-task-btn').on('click', function () {\n\t        _this.run();\n\t      });\n\t      $('#undo-btn').on('click', function (ev) {\n\t        _this.task_editor.execCommand('undo');\n\t      });\n\t      $('#redo-btn').on('click', function (ev) {\n\t        _this.task_editor.execCommand('redo');\n\t      });\n\t    },\n\t\n\t    bind_save: function bind_save() {\n\t      var _this = this;\n\t      $('#save-task-btn').on('click', function () {\n\t        var script = _this.python_editor.getDoc().getValue();\n\t        $('#right-area .overlay').show();\n\t        $.ajax({\n\t          type: \"POST\",\n\t          url: location.pathname + '/save',\n\t          data: {\n\t            script: script\n\t          },\n\t          success: function success(data) {\n\t            console.log(data);\n\t            _this.python_log('');\n\t            _this.python_log(\"saved!\");\n\t            _this.not_saved = false;\n\t            $('#right-area .overlay').hide();\n\t          },\n\t          error: function error(xhr, textStatus, errorThrown) {\n\t            console.log(xhr, textStatus, errorThrown);\n\t            _this.python_log(\"save error!\\n\" + xhr.responseText);\n\t            $('#right-area .overlay').hide();\n\t          }\n\t        });\n\t      });\n\t    },\n\t\n\t    bind_follows: function bind_follows() {\n\t      var _this = this;\n\t      $('.newtask').on('click', function () {\n\t        if ($(this).next().hasClass(\"task-show\")) {\n\t          $(this).next().remove();\n\t          return;\n\t        }\n\t        var task = $(this).after('<div class=\"task-show\"><pre class=\"cm-s-default\"></pre></div>').data(\"task\");\n\t        task = JSON.stringify(window.newtasks[task], null, '  ');\n\t        CodeMirror.runMode(task, 'application/json', $(this).next().find('pre')[0]);\n\t      });\n\t\n\t      $('.newtask .task-run').on('click', function (event) {\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\t        var task_id = $(this).parents('.newtask').data(\"task\");\n\t        var task = window.newtasks[task_id];\n\t        _this.task_editor.setValue(JSON.stringify(task, null, '  '));\n\t        _this.task_updated(task);\n\t        _this.run();\n\t      });\n\t    },\n\t\n\t    task_updated: function task_updated(task) {\n\t      $('#history-wrap').hide();\n\t      if (task.project && task.taskid) {\n\t        $.ajax({\n\t          url: \"/task/\" + task.project + \":\" + task.taskid + \".json\",\n\t          success: function success(data) {\n\t            if (!data.code && !data.error) {\n\t              $('#history-link').attr('href', \"/task/\" + task.project + \":\" + task.taskid).text(\"status: \" + data.status_string);\n\t              $('#history-wrap').show();\n\t            }\n\t          }\n\t        });\n\t      }\n\t    },\n\t\n\t    bind_others: function bind_others() {\n\t      var _this = this;\n\t      $('#python-log-show').on('click', function () {\n\t        if ($('#python-log pre').is(\":visible\")) {\n\t          $('#python-log pre').hide();\n\t          $(this).height(8);\n\t        } else {\n\t          $('#python-log pre').show();\n\t          $(this).height(0);\n\t        }\n\t      });\n\t      $('.webdav-btn').on('click', function () {\n\t        _this.toggle_webdav_mode(this);\n\t      });\n\t    },\n\t\n\t    render_html: function render_html(html, base_url) {\n\t      var block_script = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\t      var block_iframe = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\t\n\t      if (html === undefined) {\n\t        html = '';\n\t      }\n\t      var dom = new DOMParser().parseFromString(html, \"text/html\");\n\t\n\t      $(dom).find('base').remove();\n\t      $(dom).find('head').prepend('<base>');\n\t      $(dom).find('base').attr('href', base_url);\n\t\n\t      if (block_script) {\n\t        $(dom).find('script').attr('type', 'text/plain');\n\t      }\n\t      if (block_iframe) {\n\t        $(dom).find('iframe[src]').each(function (i, e) {\n\t          e = $(e);\n\t          e.attr('__src', e.attr('src'));\n\t          e.attr('src', encodeURI('data:text/html;,<h1>iframe blocked</h1>'));\n\t        });\n\t      }\n\t\n\t      return dom.documentElement.innerHTML;\n\t    },\n\t\n\t    run: function run() {\n\t      var script = this.python_editor.getDoc().getValue();\n\t      var task = this.task_editor.getDoc().getValue();\n\t      var _this = this;\n\t\n\t      // reset\n\t      SelectorHelper.clear();\n\t      $(\"#tab-web .iframe-box\").html('');\n\t      $(\"#tab-html pre\").html('');\n\t      $('#tab-follows').html('');\n\t      $(\"#tab-control li[data-id=tab-follows] .num\").hide();\n\t      $('#python-log').hide();\n\t      $('#left-area .overlay').show();\n\t\n\t      $.ajax({\n\t        type: \"POST\",\n\t        url: location.pathname + '/run',\n\t        data: {\n\t          webdav_mode: _this.webdav_mode,\n\t          script: _this.webdav_mode ? '' : script,\n\t          task: task\n\t        },\n\t        success: function success(data) {\n\t          console.log(data);\n\t          $('#left-area .overlay').hide();\n\t\n\t          //web\n\t          $(\"#tab-web .iframe-box\").html('<iframe src=\"/blank.html\" sandbox=\"allow-same-origin allow-scripts\"></iframe>');\n\t          var iframe = $(\"#tab-web iframe\")[0];\n\t          var content_type = data.fetch_result.headers && data.fetch_result.headers['Content-Type'] && data.fetch_result.headers['Content-Type'] || \"text/plain\";\n\t\n\t          //html\n\t          $(\"#tab-html pre\").text(data.fetch_result.content);\n\t          $(\"#tab-html\").data(\"format\", true);\n\t\n\t          var iframe_content = null;\n\t          if (content_type.indexOf('application/json') == 0) {\n\t            try {\n\t              var content = JSON.parse(data.fetch_result.content);\n\t              content = JSON.stringify(content, null, '  ');\n\t              content = \"<html><pre>\" + content + \"</pre></html>\";\n\t              iframe_content = _this.render_html(content, data.fetch_result.url, true, true, false);\n\t            } catch (e) {\n\t              iframe_content = \"data:,Content-Type:\" + content_type + \" parse error.\";\n\t            }\n\t          } else if (content_type.indexOf(\"text/html\") == 0) {\n\t            $(\"#tab-html\").data(\"format\", false);\n\t            iframe_content = _this.render_html(data.fetch_result.content, data.fetch_result.url, true, true, false);\n\t          } else if (content_type.indexOf(\"text\") == 0) {\n\t            iframe_content = \"data:\" + content_type + \",\" + data.fetch_result.content;\n\t          } else if (data.fetch_result.dataurl) {\n\t            iframe_content = data.fetch_result.dataurl;\n\t          } else {\n\t            iframe_content = \"data:,Content-Type:\" + content_type;\n\t          }\n\t\n\t          var doc = iframe.contentDocument;\n\t          doc.open(\"text/html\", \"replace\");\n\t          doc.write(iframe_content);\n\t          doc.close();\n\t          doc.onreadystatechange = function () {\n\t            if (doc.readyState === 'complete') {\n\t              //      console.log(\"height is:\" + doc.body.scrollHeight);\n\t              //$(\"#tab-web iframe\").height(doc.body.scrollHeight + 60);\n\t              //$(\"#tab-web iframe\").height('100%');\n\t            }\n\t          };\n\t\n\t          //follows\n\t          $('#tab-follows').html('');\n\t          var elem = $(\"#tab-control li[data-id=tab-follows] .num\");\n\t\n\t          var newtask_template = '<div class=\"newtask\" data-task=\"__task__\"><span class=\"task-callback\">__callback__</span> &gt; <span class=\"task-url\">__url__</span><div class=\"task-run\"><i class=\"fa fa-play\"></i></div><div class=\"task-more\"> <i class=\"fa fa-ellipsis-h\"></i> </div></div>';\n\t          if (data.follows.length > 0) {\n\t            elem.text(data.follows.length).show();\n\t            var all_content = \"\";\n\t            window.newtasks = {};\n\t            $.each(data.follows, function (i, task) {\n\t              var callback = task.process;\n\t              callback = callback && callback.callback || '__call__';\n\t              var content = newtask_template.replace('__callback__', callback);\n\t              content = content.replace('__url__', task.url || '<span class=\"error\">no_url!</span>');\n\t              all_content += content.replace('__task__', i);\n\t              window.newtasks[i] = task;\n\t            });\n\t            $('#tab-follows').append(all_content);\n\t            _this.bind_follows();\n\t          } else {\n\t            elem.hide();\n\t          }\n\t\n\t          //messages\n\t          $('#tab-messages pre').html('');\n\t          if (data.messages.length > 0) {\n\t            $(\"#tab-control li[data-id=tab-messages] .num\").text(data.messages.length).show();\n\t            var messages = JSON.stringify(data.messages, null, '  ');\n\t            CodeMirror.runMode(messages, 'application/json', $('#tab-messages pre')[0]);\n\t            $('#tab-messages')[0];\n\t          } else {\n\t            $(\"#tab-control li[data-id=tab-messages] .num\").hide();\n\t          }\n\t\n\t          $(\"#tab-control li.active\").click();\n\t\n\t          // logs\n\t          _this.python_log(data.logs);\n\t        },\n\t        error: function error(xhr, textStatus, errorThrown) {\n\t          console.log(xhr, textStatus, errorThrown);\n\t          _this.python_log('error: ' + textStatus);\n\t          $('#left-area .overlay').hide();\n\t        }\n\t      });\n\t    },\n\t\n\t    python_log: function python_log(text) {\n\t      if (text) {\n\t        $('#python-log pre').text(text);\n\t        $('#python-log pre, #python-log').show();\n\t        $('#python-log-show').height(0);\n\t      } else {\n\t        $('#python-log pre, #python-log').hide();\n\t      }\n\t    },\n\t\n\t    webdav_mode: false,\n\t    toggle_webdav_mode: function toggle_webdav_mode(button) {\n\t      if (!this.webdav_mode) {\n\t        if (this.not_saved) {\n\t          if (!confirm(\"You have not saved changes. Ignore changes and switch to WebDav mode.\")) {\n\t            return;\n\t          }\n\t          this.not_saved = false;\n\t        }\n\t        this.python_editor_elem.hide();\n\t        this.splitter.trigger('fullsize', 'prev');\n\t        $(button).addClass('active');\n\t        this.webdav_mode = !this.webdav_mode;\n\t      } else {\n\t        // leaving webdav mode, reload script\n\t        var _this = this;\n\t        $.ajax({\n\t          type: \"GET\",\n\t          url: location.pathname + '/get',\n\t          success: function success(data) {\n\t            _this.splitter.trigger('init');\n\t            _this.python_editor_elem.show();\n\t            _this.python_editor.setValue(data.script);\n\t            _this.not_saved = false;\n\t            $(button).removeClass('active');\n\t            _this.webdav_mode = !_this.webdav_mode;\n\t          },\n\t          error: function error() {\n\t            alert('Loading script from database error. Script may out-of-date.');\n\t            _this.python_editor_elem.show();\n\t            _this.splitter.trigger('init');\n\t            $(button).removeClass('active');\n\t            _this.webdav_mode = !_this.webdav_mode;\n\t          }\n\t        });\n\t      }\n\t    }\n\t  };\n\t}();\n\t\n\tDebugger.init();\n\n/***/ }),\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t// vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:\n\t// Author: Binux<i@binux.me>\n\t//         http://binux.me\n\t// Created on 2014-02-23 01:35:35\n\t// from: https://github.com/jsbin/jsbin\n\t\n\t$.fn.splitter = function (_type) {\n\t  var $document = $(document),\n\t      $blocker = $('<div class=\"block\"></div>'),\n\t      $body = $('body');\n\t  // blockiframe = $blocker.find('iframe')[0];\n\t\n\t  var splitterSettings = JSON.parse(localStorage.getItem('splitterSettings') || '[]');\n\t  return this.each(function () {\n\t    var $el = $(this),\n\t        $originalContainer = $(this),\n\t        guid = $.fn.splitter.guid++,\n\t        $parent = $el.parent(),\n\t        type = _type || 'x',\n\t        $prev = type === 'x' ? $el.prevAll(':visible:first') : $el.nextAll(':visible:first'),\n\t        $handle = $('<div class=\"resize\"></div>'),\n\t        dragging = false,\n\t        width = $parent.width(),\n\t        parentOffset = $parent.offset(),\n\t        left = parentOffset.left,\n\t        top = parentOffset.top,\n\t        // usually zero :(\n\t    props = {\n\t      x: {\n\t        display: 'block',\n\t        currentPos: $parent.offset().left,\n\t        multiplier: 1,\n\t        cssProp: 'left',\n\t        otherCssProp: 'right',\n\t        size: $parent.width(),\n\t        sizeProp: 'width',\n\t        moveProp: 'pageX',\n\t        init: {\n\t          top: 0,\n\t          bottom: 0,\n\t          width: 8,\n\t          'margin-left': '-4px',\n\t          height: '100%',\n\t          left: 'auto',\n\t          right: 'auto',\n\t          opacity: 0,\n\t          position: 'absolute',\n\t          cursor: 'ew-resize',\n\t          // 'border-top': '0',\n\t          'border-left': '1px solid rgba(218, 218, 218, 0.5)',\n\t          'z-index': 99999\n\t        }\n\t      },\n\t      y: {\n\t        display: 'block',\n\t        currentPos: $parent.offset().top,\n\t        multiplier: -1,\n\t        size: $parent.height(),\n\t        cssProp: 'bottom',\n\t        otherCssProp: 'top',\n\t        sizeProp: 'height',\n\t        moveProp: 'pageY',\n\t        init: {\n\t          top: 'auto',\n\t          cursor: 'ns-resize',\n\t          bottom: 'auto',\n\t          height: 8,\n\t          width: '100%',\n\t          left: 0,\n\t          right: 0,\n\t          opacity: 0,\n\t          position: 'absolute',\n\t          border: 0,\n\t          // 'border-top': '1px solid rgba(218, 218, 218, 0.5)',\n\t          'z-index': 99999\n\t        }\n\t      }\n\t    },\n\t        refreshTimer = null,\n\t        settings = splitterSettings[guid] || {};\n\t\n\t    var tracker = {\n\t      down: { x: null, y: null },\n\t      delta: { x: null, y: null },\n\t      track: false,\n\t      timer: null\n\t    };\n\t    $handle.bind('mousedown', function (event) {\n\t      tracker.down.x = event.pageX;\n\t      tracker.down.y = event.pageY;\n\t      tracker.delta = { x: null, y: null };\n\t      tracker.target = $handle[type == 'x' ? 'height' : 'width']() * 0.25;\n\t    });\n\t\n\t    $document.bind('mousemove', function (event) {\n\t      if (dragging) {\n\t        tracker.delta.x = tracker.down.x - event.pageX;\n\t        tracker.delta.y = tracker.down.y - event.pageY;\n\t        clearTimeout(tracker.timer);\n\t        tracker.timer = setTimeout(function () {\n\t          tracker.down.x = event.pageX;\n\t          tracker.down.y = event.pageY;\n\t        }, 250);\n\t        //disable change to y\n\t        //var targetType = type == 'x' ? 'y' : 'x';\n\t        //if (Math.abs(tracker.delta[targetType]) > tracker.target) {\n\t        //$handle.trigger('change', targetType, event[props[targetType].moveProp]);\n\t        //tracker.down.x = event.pageX;\n\t        //tracker.down.y = event.pageY;\n\t        //}\n\t      }\n\t    });\n\t\n\t    function moveSplitter(pos) {\n\t      if (type === 'y') {\n\t        pos -= top;\n\t      }\n\t      var v = pos - props[type].currentPos,\n\t          split = 100 / props[type].size * v,\n\t          delta = (pos - settings[type]) * props[type].multiplier,\n\t          prevSize = $prev[props[type].sizeProp](),\n\t          elSize = $el[props[type].sizeProp]();\n\t\n\t      if (type === 'y') {\n\t        split = 100 - split;\n\t      }\n\t\n\t      // if prev panel is too small and delta is negative, block\n\t      if (prevSize < 100 && delta < 0) {\n\t        // ignore\n\t      } else if (elSize < 100 && delta > 0) {\n\t        // ignore\n\t      } else {\n\t        // allow sizing to happen\n\t        $el.css(props[type].cssProp, split + '%');\n\t        $prev.css(props[type].otherCssProp, 100 - split + '%');\n\t        var css = {};\n\t        css[props[type].cssProp] = split + '%';\n\t        $handle.css(css);\n\t        settings[type] = pos;\n\t        splitterSettings[guid] = settings;\n\t        localStorage.setItem('splitterSettings', JSON.stringify(splitterSettings));\n\t\n\t        // wait until animations have completed!\n\t        if (moveSplitter.timer) clearTimeout(moveSplitter.timer);\n\t        moveSplitter.timer = setTimeout(function () {\n\t          $document.trigger('sizeeditors');\n\t        }, 120);\n\t      }\n\t    }\n\t\n\t    function resetPrev() {\n\t      $prev = type === 'x' ? $handle.prevAll(':visible:first') : $handle.nextAll(':visible:first');\n\t    }\n\t\n\t    $document.bind('mouseup touchend', function () {\n\t      if (dragging) {\n\t        dragging = false;\n\t        $handle.trigger('resize-end');\n\t        $blocker.remove();\n\t        // $handle.css( 'opacity', '0');\n\t        $body.removeClass('dragging');\n\t      }\n\t    }).bind('mousemove touchmove', function (event) {\n\t      if (dragging) {\n\t        moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\n\t      }\n\t    });\n\t\n\t    $blocker.bind('mousemove touchmove', function (event) {\n\t      if (dragging) {\n\t        moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\n\t      }\n\t    });\n\t\n\t    $handle.bind('mousedown touchstart', function (e) {\n\t      dragging = true;\n\t      $handle.trigger('resize-start');\n\t      $body.append($blocker).addClass('dragging');\n\t      props[type].size = $parent[props[type].sizeProp]();\n\t      props[type].currentPos = 0; // is this really required then?\n\t\n\t      resetPrev();\n\t      e.preventDefault();\n\t    });\n\t\n\t    /*\n\t       .hover(function () {\n\t       $handle.css('opacity', '1');\n\t       }, function () {\n\t       if (!dragging) {\n\t       $handle.css('opacity', '0');\n\t       }\n\t       })\n\t       */\n\t\n\t    $handle.bind('fullsize', function (event, panel) {\n\t      if (panel === undefined) {\n\t        panel = 'prev';\n\t      }\n\t      var split = 0;\n\t      if (panel === 'prev') {\n\t        split = 100;\n\t      }\n\t      $el.css(props[type].cssProp, split + '%');\n\t      $prev.css(props[type].otherCssProp, 100 - split + '%');\n\t      $handle.hide();\n\t    });\n\t\n\t    $handle.bind('init', function (event, x) {\n\t      $handle.css(props[type].init);\n\t      props[type].size = $parent[props[type].sizeProp]();\n\t      resetPrev();\n\t\n\t      // can only be read at init\n\t      top = $parent.offset().top;\n\t\n\t      $blocker.css('cursor', type == 'x' ? 'ew-resize' : 'ns-resize');\n\t\n\t      if (type == 'y') {\n\t        $el.css('border-right', 0);\n\t        $prev.css('border-left', 0);\n\t        $prev.css('border-top', '2px solid #ccc');\n\t      } else {\n\t        // $el.css('border-right', '1px solid #ccc');\n\t        $el.css('border-top', 0);\n\t        // $prev.css('border-right', '2px solid #ccc');\n\t      }\n\t\n\t      if ($el.is(':hidden')) {\n\t        $handle.hide();\n\t      } else {\n\t        if ($prev.length) {\n\t          $el.css('border-' + props[type].cssProp, '1px solid #ccc');\n\t        } else {\n\t          $el.css('border-' + props[type].cssProp, '0');\n\t        }\n\t        moveSplitter(x !== undefined ? x : settings[type] || $el.offset()[props[type].cssProp]);\n\t      }\n\t    }); //.trigger('init', settings.x || $el.offset().left);\n\t\n\t    $handle.bind('change', function (event, toType, value) {\n\t      $el.css(props[type].cssProp, '0');\n\t      $prev.css(props[type].otherCssProp, '0');\n\t      $el.css('border-' + props[type].cssProp, '0');\n\t\n\t      if (toType === 'y') {\n\t        // 1. drop inside of a new div that encompases the elements\n\t        $el = $el.find('> *');\n\t        $handle.appendTo($prev);\n\t        $el.appendTo($prev);\n\t        $prev.css('height', '100%');\n\t        $originalContainer.hide();\n\t        $handle.css('margin-left', 0);\n\t        $handle.css('margin-top', 5);\n\t\n\t        $handle.addClass('vertical');\n\t\n\t        delete settings.x;\n\t\n\t        $originalContainer.nextAll(':visible:first').trigger('init');\n\t        // 2. change splitter to the right to point to new block div\n\t      } else {\n\t        $el = $prev;\n\t        $prev = $tmp;\n\t\n\t        $el.appendTo($originalContainer);\n\t        $handle.insertBefore($originalContainer);\n\t        $handle.removeClass('vertical');\n\t        $el.css('border-top', 0);\n\t        $el = $originalContainer;\n\t        $originalContainer.show();\n\t        $handle.css('margin-top', 0);\n\t        $handle.css('margin-left', -4);\n\t        delete settings.y;\n\t\n\t        setTimeout(function () {\n\t          $originalContainer.nextAll(':visible:first').trigger('init');\n\t        }, 0);\n\t      }\n\t\n\t      resetPrev();\n\t\n\t      type = toType;\n\t\n\t      // if (type == 'y') {\n\t      // FIXME $prev should check visible\n\t      var $tmp = $el;\n\t      $el = $prev;\n\t      $prev = $tmp;\n\t      // } else {\n\t\n\t      // }\n\t\n\t      $el.css(props[type].otherCssProp, '0');\n\t      $prev.css(props[type].cssProp, '0');\n\t      // TODO\n\t      // reset top/bottom positions\n\t      // reset left/right positions\n\t\n\t      if ($el.is(':visible')) {\n\t        // find all other handles and recalc their height\n\t        if (type === 'y') {\n\t          var otherhandles = $el.find('.resize');\n\t\n\t          otherhandles.each(function (i) {\n\t            // find the top of the\n\t            var $h = $(this);\n\t            if (this === $handle[0]) {\n\t              // ignore\n\t            } else {\n\t              // TODO change to real px :(\n\t              $h.trigger('init', 100 / (otherhandles - i - 1));\n\t            }\n\t          });\n\t        }\n\t        $handle.trigger('init', value || $el.offset()[props[type].cssProp] || props[type].size / 2);\n\t      }\n\t    });\n\t\n\t    $prev.css('width', 'auto');\n\t    $prev.css('height', 'auto');\n\t    $el.data('splitter', $handle);\n\t    $el.before($handle);\n\t\n\t    // if (settings.y) {\n\t    //   $handle.trigger('change', 'y');\n\t    // }\n\t  });\n\t};\n\t\n\t$.fn.splitter.guid = 0;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 9 */,\n/* 10 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t/*!\n\t * JQuery Spliter Plugin version 0.27.1\n\t * Copyright (C) 2010-2018 Jakub Jankiewicz <http://jcubic.pl/me>\n\t *\n\t * This program is free software: you can redistribute it and/or modify\n\t * it under the terms of the GNU Lesser General Public License as published by\n\t * the Free Software Foundation, either version 3 of the License, or\n\t * (at your option) any later version.\n\t *\n\t * This program is distributed in the hope that it will be useful,\n\t * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t * GNU Lesser General Public License for more details.\n\t *\n\t * You should have received a copy of the GNU Lesser General Public License\n\t * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t */\n\t(function ($, undefined) {\n\t    var count = 0;\n\t    var splitter_id = null;\n\t    var splitters = [];\n\t    var current_splitter = null;\n\t    $.fn.split = function (options) {\n\t        var data = this.data('splitter');\n\t        if (data) {\n\t            return data;\n\t        }\n\t        var panel_1;\n\t        var panel_2;\n\t        var settings = $.extend({\n\t            limit: 100,\n\t            orientation: 'horizontal',\n\t            position: '50%',\n\t            invisible: false,\n\t            onDragStart: $.noop,\n\t            onDragEnd: $.noop,\n\t            onDrag: $.noop,\n\t            percent: false\n\t        }, options || {});\n\t        this.settings = settings;\n\t        var cls;\n\t        var children = this.children();\n\t        if (settings.orientation == 'vertical') {\n\t            panel_1 = children.first().addClass('left_panel');\n\t            panel_2 = panel_1.next().addClass('right_panel');\n\t            cls = 'vsplitter';\n\t        } else if (settings.orientation == 'horizontal') {\n\t            panel_1 = children.first().addClass('top_panel');\n\t            panel_2 = panel_1.next().addClass('bottom_panel');\n\t            cls = 'hsplitter';\n\t        }\n\t        if (settings.invisible) {\n\t            cls += ' splitter-invisible';\n\t        }\n\t        var width = this.width();\n\t        var height = this.height();\n\t        var id = count++;\n\t        this.addClass('splitter_panel');\n\t        var splitter = $('<div/>').addClass(cls).bind('mouseenter touchstart', function () {\n\t            splitter_id = id;\n\t        }).bind('mouseleave touchend', function () {\n\t            splitter_id = null;\n\t        }).insertAfter(panel_1);\n\t        var position;\n\t\n\t        function get_position(position) {\n\t            if (typeof position === 'number') {\n\t                return position;\n\t            } else if (typeof position === 'string') {\n\t                var match = position.match(/^([0-9\\.]+)(px|%)$/);\n\t                if (match) {\n\t                    if (match[2] == 'px') {\n\t                        return +match[1];\n\t                    } else {\n\t                        if (settings.orientation == 'vertical') {\n\t                            return width * +match[1] / 100;\n\t                        } else if (settings.orientation == 'horizontal') {\n\t                            return height * +match[1] / 100;\n\t                        }\n\t                    }\n\t                } else {\n\t                    //throw position + ' is invalid value';\n\t                }\n\t            } else {\n\t                    //throw 'position have invalid type';\n\t                }\n\t        }\n\t\n\t        function set_limit(limit) {\n\t            if (!isNaN(parseFloat(limit)) && isFinite(limit)) {\n\t                return {\n\t                    leftUpper: limit,\n\t                    rightBottom: limit\n\t                };\n\t            }\n\t            return limit;\n\t        }\n\t\n\t        var self = $.extend(this, {\n\t            refresh: function refresh() {\n\t                var new_width = this.width();\n\t                var new_height = this.height();\n\t                if (width != new_width || height != new_height) {\n\t                    width = this.width();\n\t                    height = this.height();\n\t                    self.position(position);\n\t                }\n\t            },\n\t            option: function option(name, value) {\n\t                if (name === 'position') {\n\t                    return self.position(value);\n\t                } else if (typeof value === 'undefined') {\n\t                    return settings[name];\n\t                } else {\n\t                    settings[name] = value;\n\t                }\n\t                return self;\n\t            },\n\t            position: function () {\n\t                if (settings.orientation == 'vertical') {\n\t                    return function (n, silent) {\n\t                        if (n === undefined) {\n\t                            return position;\n\t                        } else {\n\t                            position = get_position(n);\n\t                            var sw = splitter.width();\n\t                            var sw2 = sw / 2,\n\t                                pw;\n\t                            var width = self.width();\n\t                            if (settings.invisible) {\n\t                                pw = panel_1.width(position).outerWidth();\n\t                                panel_2.width(width - pw);\n\t                                splitter.css('left', pw - sw2);\n\t                            } else {\n\t                                if (settings.percent) {\n\t                                    var w1 = (position - sw2) / width * 100;\n\t                                    pw = panel_1.css('width', w1 + '%').outerWidth();\n\t                                    panel_2.css('width', (width - pw - sw) / width * 100 + '%');\n\t                                    splitter.css('left', pw / width * 100 + '%');\n\t                                } else {\n\t                                    pw = panel_1.css('width', position - sw2).outerWidth();\n\t                                    panel_2.width(width - pw - sw);\n\t                                    splitter.css('left', pw);\n\t                                }\n\t                            }\n\t                            panel_1.find('.splitter_panel').eq(0).height(self.height());\n\t                            panel_2.find('.splitter_panel').eq(0).height(self.height());\n\t                        }\n\t                        if (!silent) {\n\t                            self.trigger('splitter.resize');\n\t                            self.find('.splitter_panel').trigger('splitter.resize');\n\t                        }\n\t                        return self;\n\t                    };\n\t                } else if (settings.orientation == 'horizontal') {\n\t                    return function (n, silent) {\n\t                        if (n === undefined) {\n\t                            return position;\n\t                        } else {\n\t                            position = get_position(n);\n\t                            var sw = splitter.height();\n\t                            var sw2 = sw / 2,\n\t                                pw;\n\t                            var height = self.height();\n\t                            if (settings.invisible) {\n\t                                pw = panel_1.height(position).outerHeight();\n\t                                panel_2.height(height - pw);\n\t                                splitter.css('top', pw - sw2);\n\t                            } else if (settings.percent) {\n\t                                var h1 = (position - sw2) / height * 100;\n\t                                pw = panel_1.css('height', h1 + '%').outerHeight();\n\t                                panel_2.css('height', (height - pw - sw) / height * 100 + '%');\n\t                                splitter.css('top', pw / height * 100 + '%');\n\t                            } else {\n\t                                pw = panel_1.height(position - sw2).outerHeight();\n\t                                panel_2.height(height - pw - sw);\n\t                                splitter.css('top', pw);\n\t                            }\n\t                        }\n\t                        if (!silent) {\n\t                            self.trigger('splitter.resize');\n\t                            self.find('.splitter_panel').trigger('splitter.resize');\n\t                        }\n\t                        return self;\n\t                    };\n\t                } else {\n\t                    return $.noop;\n\t                }\n\t            }(),\n\t            orientation: settings.orientation,\n\t            limit: set_limit(settings.limit),\n\t            isActive: function isActive() {\n\t                return splitter_id === id;\n\t            },\n\t            destroy: function destroy() {\n\t                self.removeClass('splitter_panel');\n\t                splitter.unbind('mouseenter');\n\t                splitter.unbind('mouseleave');\n\t                splitter.unbind('touchstart');\n\t                splitter.unbind('touchmove');\n\t                splitter.unbind('touchend');\n\t                splitter.unbind('touchleave');\n\t                splitter.unbind('touchcancel');\n\t                if (settings.orientation == 'vertical') {\n\t                    panel_1.removeClass('left_panel');\n\t                    panel_2.removeClass('right_panel');\n\t                } else if (settings.orientation == 'horizontal') {\n\t                    panel_1.removeClass('top_panel');\n\t                    panel_2.removeClass('bottom_panel');\n\t                }\n\t                self.unbind('splitter.resize');\n\t                self.trigger('splitter.resize');\n\t                self.find('.splitter_panel').trigger('splitter.resize');\n\t                splitters[id] = null;\n\t                count--;\n\t                splitter.remove();\n\t                self.removeData('splitter');\n\t                var not_null = false;\n\t                for (var i = splitters.length; i--;) {\n\t                    if (splitters[i] !== null) {\n\t                        not_null = true;\n\t                        break;\n\t                    }\n\t                }\n\t                //remove document events when no splitters\n\t                if (!not_null) {\n\t                    $(document.documentElement).unbind('.splitter');\n\t                    $(window).unbind('resize.splitter');\n\t                    splitters = [];\n\t                    count = 0;\n\t                }\n\t            }\n\t        });\n\t        self.bind('splitter.resize', function (e) {\n\t            var pos = self.position();\n\t            if (self.orientation == 'vertical' && pos > self.width()) {\n\t                pos = self.width() - self.limit.rightBottom - 1;\n\t            } else if (self.orientation == 'horizontal' && pos > self.height()) {\n\t                pos = self.height() - self.limit.rightBottom - 1;\n\t            }\n\t            if (pos < self.limit.leftUpper) {\n\t                pos = self.limit.leftUpper + 1;\n\t            }\n\t            e.stopPropagation();\n\t            self.position(pos, true);\n\t        });\n\t        //inital position of splitter\n\t        var pos;\n\t        if (settings.orientation == 'vertical') {\n\t            if (pos > width - settings.limit.rightBottom) {\n\t                pos = width - settings.limit.rightBottom;\n\t            } else {\n\t                pos = get_position(settings.position);\n\t            }\n\t        } else if (settings.orientation == 'horizontal') {\n\t            //position = height/2;\n\t            if (pos > height - settings.limit.rightBottom) {\n\t                pos = height - settings.limit.rightBottom;\n\t            } else {\n\t                pos = get_position(settings.position);\n\t            }\n\t        }\n\t        if (pos < settings.limit.leftUpper) {\n\t            pos = settings.limit.leftUpper;\n\t        }\n\t        self.position(pos, true);\n\t        var parent = this.closest('.splitter_panel');\n\t        if (parent.length) {\n\t            this.height(parent.height());\n\t        }\n\t        // bind events to document if no splitters\n\t        if (splitters.filter(Boolean).length === 0) {\n\t            $(window).bind('resize.splitter', function () {\n\t                $.each(splitters, function (i, splitter) {\n\t                    if (splitter) {\n\t                        splitter.refresh();\n\t                    }\n\t                });\n\t            });\n\t            $(document.documentElement).on('mousedown.splitter touchstart.splitter', function (e) {\n\t                if (splitter_id !== null) {\n\t                    e.preventDefault();\n\t                    current_splitter = splitters[splitter_id];\n\t                    setTimeout(function () {\n\t                        $('<div class=\"splitterMask\"></div>').css('cursor', current_splitter.children().eq(1).css('cursor')).insertAfter(current_splitter);\n\t                    });\n\t                    current_splitter.settings.onDragStart(e);\n\t                }\n\t            }).bind('mouseup.splitter touchend.splitter touchleave.splitter touchcancel.splitter', function (e) {\n\t                if (current_splitter) {\n\t                    setTimeout(function () {\n\t                        $('.splitterMask').remove();\n\t                    });\n\t                    current_splitter.settings.onDragEnd(e);\n\t                    current_splitter = null;\n\t                }\n\t            }).bind('mousemove.splitter touchmove.splitter', function (e) {\n\t                if (current_splitter !== null) {\n\t                    var leftUpperLimit = current_splitter.limit.leftUpper;\n\t                    var rightBottomLimit = current_splitter.limit.rightBottom;\n\t                    var offset = current_splitter.offset();\n\t                    if (current_splitter.orientation == 'vertical') {\n\t                        var pageX = e.pageX;\n\t                        if (e.originalEvent && e.originalEvent.changedTouches) {\n\t                            pageX = e.originalEvent.changedTouches[0].pageX;\n\t                        }\n\t                        var x = pageX - offset.left;\n\t                        if (x <= current_splitter.limit.leftUpper) {\n\t                            x = current_splitter.limit.leftUpper + 1;\n\t                        } else if (x >= current_splitter.width() - rightBottomLimit) {\n\t                            x = current_splitter.width() - rightBottomLimit - 1;\n\t                        }\n\t                        if (x > current_splitter.limit.leftUpper && x < current_splitter.width() - rightBottomLimit) {\n\t                            current_splitter.position(x, true);\n\t                            current_splitter.trigger('splitter.resize');\n\t                            current_splitter.find('.splitter_panel').trigger('splitter.resize');\n\t                            //e.preventDefault();\n\t                        }\n\t                    } else if (current_splitter.orientation == 'horizontal') {\n\t                        var pageY = e.pageY;\n\t                        if (e.originalEvent && e.originalEvent.changedTouches) {\n\t                            pageY = e.originalEvent.changedTouches[0].pageY;\n\t                        }\n\t                        var y = pageY - offset.top;\n\t                        if (y <= current_splitter.limit.leftUpper) {\n\t                            y = current_splitter.limit.leftUpper + 1;\n\t                        } else if (y >= current_splitter.height() - rightBottomLimit) {\n\t                            y = current_splitter.height() - rightBottomLimit - 1;\n\t                        }\n\t                        if (y > current_splitter.limit.leftUpper && y < current_splitter.height() - rightBottomLimit) {\n\t                            current_splitter.position(y, true);\n\t                            current_splitter.trigger('splitter.resize');\n\t                            current_splitter.find('.splitter_panel').trigger('splitter.resize');\n\t                            //e.preventDefault();\n\t                        }\n\t                    }\n\t                    current_splitter.settings.onDrag(e);\n\t                }\n\t            }); //*/\n\t        }\n\t        splitters[id] = self;\n\t        self.data('splitter', self);\n\t        return self;\n\t    };\n\t})(jQuery);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _events = __webpack_require__(12);\n\t\n\tvar _events2 = _interopRequireDefault(_events);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } // vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:\n\t// Author: Binux<i@binux.me>\n\t//         http://binux.me\n\t// Created on 2013-11-11 18:50:58\n\t\n\tfunction arrayEquals(a, b) {\n\t  if (!a || !b) return false;\n\t  if (a.length != b.length) return false;\n\t\n\t  for (var i = 0, l = a.length; i < l; i++) {\n\t    if (a[i] !== b[i]) return false;\n\t  }\n\t  return true;\n\t}\n\t\n\tfunction getOffset(elem) {\n\t  var top = 0;\n\t  var left = 0;\n\t  do {\n\t    if (!isNaN(elem.offsetLeft)) left += elem.offsetLeft;\n\t    if (!isNaN(elem.offsetTop)) top += elem.offsetTop;\n\t  } while (elem = elem.offsetParent);\n\t  return { top: top, left: left };\n\t}\n\t\n\tfunction merge_name(features) {\n\t  var element_name = '';\n\t  features.forEach(function (f) {\n\t    if (f.selected) element_name += f.name;\n\t  });\n\t  return element_name;\n\t}\n\t\n\tfunction merge_pattern(path, end) {\n\t  var pattern = '';\n\t  var prev = null;\n\t  path.forEach(function (p, i) {\n\t    if (end >= 0 && i > end) {\n\t      return;\n\t    }\n\t    if (p.invalid) {\n\t      prev = null;\n\t    } else if (p.selected) {\n\t      if (prev) {\n\t        pattern += ' >';\n\t      }\n\t      var element_pattern = '';\n\t      p.features.forEach(function (f) {\n\t        if (f.selected) {\n\t          element_pattern += f.pattern;\n\t        }\n\t      });\n\t      if (element_pattern === '') {\n\t        element_pattern = '*';\n\t      }\n\t      pattern += ' ' + element_pattern;\n\t      prev = p;\n\t    } else {\n\t      prev = null;\n\t    }\n\t  });\n\t  if (pattern === '') {\n\t    pattern = '*';\n\t  }\n\t  return pattern;\n\t}\n\t\n\tfunction path_info(doc, element) {\n\t  var path = [];\n\t  do {\n\t    var features = [];\n\t    // tagName\n\t    features.push({\n\t      name: element.tagName.toLowerCase(),\n\t      pattern: element.tagName.toLowerCase(),\n\t      selected: true\n\t    });\n\t    // id\n\t    if (element.getAttribute('id')) {\n\t      features.push({\n\t        name: '#' + element.getAttribute('id'),\n\t        pattern: '#' + element.getAttribute('id'),\n\t        selected: true\n\t      });\n\t    }\n\t    // class\n\t    if (element.classList.length > 0) {\n\t      for (var i = 0; i < element.classList.length; i++) {\n\t        var class_name = element.classList[i];\n\t        features.push({\n\t          name: '.' + class_name,\n\t          pattern: '.' + class_name,\n\t          selected: true\n\t        });\n\t      }\n\t    }\n\t    // rel, property\n\t    var allowed_attr_names = ('rel', 'property', 'itemprop');\n\t    for (var i = 0, attrs = element.attributes; i < attrs.length; i++) {\n\t      if (allowed_attr_names.indexOf(attrs[i].nodeName) == -1) {\n\t        continue;\n\t      }\n\t      features.push({\n\t        name: '[' + attrs[i].nodeName + '=' + JSON.stringify(attrs[i].nodeValue) + ']',\n\t        pattern: '[' + attrs[i].nodeName + '=' + JSON.stringify(attrs[i].nodeValue) + ']',\n\t        selected: true\n\t      });\n\t    }\n\t\n\t    // get xpath\n\t    var siblings = element.parentNode.childNodes;\n\t    var xpath = element.tagName.toLowerCase();\n\t    for (var i = 0, ix = 0; siblings.length > 1 && i < siblings.length; i++) {\n\t      var sibling = siblings[i];\n\t      if (sibling === element) {\n\t        xpath += '[' + (ix + 1) + ']';\n\t        break;\n\t      } else if (sibling.tagName == element.tagName) {\n\t        ix++;\n\t      }\n\t    }\n\t\n\t    // pack it up\n\t    path.push({\n\t      tag: element.tagName.toLowerCase(),\n\t      name: merge_name(features),\n\t      xpath: xpath,\n\t      selected: true,\n\t      invalid: element.tagName.toLowerCase() === 'tbody',\n\t      features: features\n\t    });\n\t  } while (element = element.parentElement);\n\t\n\t  path.reverse();\n\t\n\t  // select elements\n\t  var selected_elements = doc.querySelectorAll(merge_pattern(path));\n\t  path.forEach(function (p, i) {\n\t    if (p.invalid) return;\n\t    // select features\n\t    var feature_selected_elements = doc.querySelectorAll(merge_pattern(path, i));\n\t    p.features.forEach(function (f, fi) {\n\t      f.selected = false;\n\t      if (arrayEquals(feature_selected_elements, doc.querySelectorAll(merge_pattern(path, i)))) {\n\t        return;\n\t      }\n\t      f.selected = true;\n\t    });\n\t    if (p.features.every(function (f) {\n\t      return !f.selected;\n\t    })) {\n\t      p.features[0].selected = true;\n\t    }\n\t    p.name = merge_name(p.features);\n\t  });\n\t\n\t  path.forEach(function (p, i) {\n\t    p.selected = false;\n\t    if (arrayEquals(selected_elements, doc.querySelectorAll(merge_pattern(path)))) {\n\t      p.name = p.tag;\n\t      return;\n\t    }\n\t    p.selected = true;\n\t  });\n\t\n\t  return path;\n\t}\n\t\n\tvar CSSSelectorHelperServer = function (_EventEmitter) {\n\t  _inherits(CSSSelectorHelperServer, _EventEmitter);\n\t\n\t  function CSSSelectorHelperServer(window) {\n\t    _classCallCheck(this, CSSSelectorHelperServer);\n\t\n\t    var _this = _possibleConstructorReturn(this, (CSSSelectorHelperServer.__proto__ || Object.getPrototypeOf(CSSSelectorHelperServer)).call(this));\n\t\n\t    _this.window = window;\n\t    _this.document = window.document;\n\t\n\t    _this.document.addEventListener(\"mouseover\", function (ev) {\n\t      _this.overlay(ev.target);\n\t    });\n\t\n\t    _this.document.addEventListener(\"click\", function (ev) {\n\t      ev.preventDefault();\n\t      ev.stopPropagation();\n\t\n\t      _this.emit('selector_helper_click', path_info(_this.document, ev.target));\n\t    });\n\t    return _this;\n\t  }\n\t\n\t  _createClass(CSSSelectorHelperServer, [{\n\t    key: 'overlay',\n\t    value: function overlay(elements) {\n\t      var _this2 = this;\n\t\n\t      if (typeof elements === 'string') {\n\t        elements = this.document.querySelectorAll(elements);\n\t      }\n\t      if (elements instanceof this.window.Element) {\n\t        elements = [elements];\n\t      }\n\t      [].concat(_toConsumableArray(this.document.querySelectorAll('.pyspider_overlay'))).forEach(function (elem) {\n\t        elem.remove();\n\t      });\n\t      [].concat(_toConsumableArray(elements)).forEach(function (elem) {\n\t        var offset = getOffset(elem);\n\t        var div = _this2.document.createElement(\"div\");\n\t        div.className = \"pyspider_overlay\";\n\t        div.setAttribute('style', 'z-index: 999999;background-color: rgba(255, 165, 0, 0.3);position: absolute;pointer-events: none;' + 'top: ' + offset.top + 'px;' + 'left:' + offset.left + 'px;' + 'width: ' + elem.offsetWidth + 'px;' + 'height: ' + elem.offsetHeight + 'px;');\n\t        _this2.document.body.appendChild(div);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'heightlight',\n\t    value: function heightlight(elements) {\n\t      var _this3 = this;\n\t\n\t      if (typeof elements === 'string') {\n\t        elements = this.document.querySelectorAll(elements);\n\t      }\n\t      console.log(elements);\n\t      if (elements instanceof this.window.Element) {\n\t        elements = [elements];\n\t      }\n\t      [].concat(_toConsumableArray(this.document.querySelectorAll('.pyspider_highlight'))).forEach(function (elem) {\n\t        elem.remove();\n\t      });\n\t      [].concat(_toConsumableArray(elements)).forEach(function (elem) {\n\t        var offset = getOffset(elem);\n\t        var div = _this3.document.createElement(\"div\");\n\t        div.className = \"pyspider_highlight\";\n\t        div.setAttribute('style', 'z-index: 888888;border: 2px solid #c00;position: absolute;pointer-events: none;' + 'top: ' + (offset.top - 2) + 'px;' + 'left:' + (offset.left - 2) + 'px;' + 'width: ' + elem.offsetWidth + 'px;' + 'height: ' + elem.offsetHeight + 'px;');\n\t        _this3.document.body.appendChild(div);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getElementByXpath',\n\t    value: function getElementByXpath(path) {\n\t      return this.document.evaluate(path, this.document, null, this.window.XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n\t    }\n\t  }]);\n\t\n\t  return CSSSelectorHelperServer;\n\t}(_events2.default);\n\t\n\texports.default = CSSSelectorHelperServer;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function (n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n)) throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function (type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events) this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error || isObject(this._events.error) && !this._events.error.length) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler)) return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++) {\n\t      listeners[i].apply(this, args);\n\t    }\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function (type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\t\n\t  if (!this._events) this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener) this.emit('newListener', type, isFunction(listener.listener) ? listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' + 'leak detected. %d listeners added. ' + 'Use emitter.setMaxListeners() to increase limit.', this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function (type, listener) {\n\t  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function (type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener)) throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type]) return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener || isFunction(list.listener) && list.listener === listener) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener) this.emit('removeListener', type, listener);\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener || list[i].listener && list[i].listener === listener) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0) return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener) this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function (type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events) return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0) this._events = {};else if (this._events[type]) delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length) {\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t    }\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function (type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type]) ret = [];else if (isFunction(this._events[type])) ret = [this._events[type]];else ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function (type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener)) return 1;else if (evlistener) return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function (emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return (typeof arg === 'undefined' ? 'undefined' : _typeof(arg)) === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// debug.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d6b5a41178bad65f2985","// vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:\n// Author: Binux<i@binux.me>\n//         http://binux.me\n// Created on 2014-02-23 15:19:19\n\nimport \"./debug.less\"\nimport \"./splitter\"\n\nimport \"./jquery.splitter.less\"\nimport \"./jquery.splitter\"\nimport CSSSelectorHelperServer from \"./css_selector_helper\"\n\nwindow.SelectorHelper = (function() {\n  var helper = $('#css-selector-helper');\n  var server = null;\n\n  function merge_name(p) {\n    var features = p.features;\n    var element_name = '';\n    features.forEach(function(f) {\n      if (f.selected)\n        element_name += f.name;\n    });\n    if (element_name === '') {\n      return p.tag;\n    }\n    return element_name;\n  }\n\n  function merge_pattern(path, end) {\n    var pattern = '';\n    var prev = null;\n    path.forEach(function(p, i) {\n      if (end >= 0 && i > end) {\n        return;\n      }\n      if (p.invalid) {\n        prev = null;\n      } else if (p.selected) {\n        if (prev) {\n          pattern += ' >';\n        }\n        var element_pattern = '';\n        p.features.forEach(function(f) {\n          if (f.selected) {\n            element_pattern += f.pattern;\n          }\n        });\n        if (element_pattern === '') {\n          element_pattern = '*';\n        }\n        pattern += ' '+element_pattern;\n        prev = p;\n      } else {\n        prev = null;\n      }\n    })\n    if (pattern === '') {\n      pattern = '*';\n    }\n    return pattern.trim();\n  }\n\n  var current_path = null;\n  function selector_changed(path) {\n    current_path = path;\n    server.heightlight(merge_pattern(path));\n  }\n  \n  function render_selector_helper(path) {\n    helper.find('.element').remove();\n    var elements = [];\n    $.each(path, function(i, p) {\n      var span = $('<span>').addClass('element').data('info', p);\n      $('<span class=\"element-name\">').text(p.name).appendTo(span);\n      if (p.selected) span.addClass('selected');\n      if (p.invalid) span.addClass('invalid');\n\n      var ul = $('<ul>');\n      $.each(p.features, function(i, f) {\n        var li = $('<li>').text(f.name).data('feature', f);\n        if (f.selected) li.addClass('selected');\n        li.appendTo(ul);\n        // feature on click\n        li.on('click', function(ev) {\n          ev.stopPropagation();\n          var $this = $(this);\n          var f = $this.data('feature');\n          if (f.selected) {\n            f.selected = false;\n            $this.removeClass('selected');\n          } else {\n            f.selected = true;\n            $this.addClass('selected');\n          }\n          var element = $this.parents('.element');\n          if (!p.selected) {\n            p.selected = true;\n            element.addClass('selected');\n          }\n          element.find('.element-name').text(merge_name(p));\n          selector_changed(path);\n        });\n      });\n      ul.appendTo(span);\n\n      span.on('mouseover', (ev) => {\n        var xpath = [];\n        $.each(path, function(i, _p) {\n          xpath.push(_p.xpath);\n          if (_p === p) {\n            return false;\n          }\n        });\n        server.overlay(server.getElementByXpath('/' + xpath.join('/')));\n      })\n      // path on click\n      span.on('click', function(ev) {\n        ev.stopPropagation();\n        var $this = $(this);\n        var p = $this.data('info');\n        if (p.selected) {\n          p.selected = false;\n          $this.removeClass('selected');\n        } else {\n          p.selected = true;\n          $this.addClass('selected');\n        }\n        $this.find('.element-name').text(merge_name($this.data('info')));\n        selector_changed(path);\n      });\n      elements.push(span);\n    });\n    helper.prepend(elements);\n\n    adjustHelper();\n    selector_changed(path);\n  }\n\n  function adjustHelper() {\n    while (helper[0].scrollWidth > helper.width()) {\n      var e = helper.find('.element:visible:first');\n      if (e.length == 0) {\n        return;\n      }\n      e.addClass('invalid').data('info')['invalid'] = true;\n    }\n  }\n\n  var tab_web = $('#tab-web');\n  return {\n    init: function() {\n      var _this = this;\n      _this.clear();\n\n      $(\"#J-enable-css-selector-helper\").on('click', ev => {\n        this.clear();\n        server = new CSSSelectorHelperServer($(\"#tab-web iframe\")[0].contentWindow);\n        server.on('selector_helper_click', path => {\n          render_selector_helper(path);\n        })\n        this.enable();\n      });\n\n      $(\"#task-panel\").on(\"scroll\", function(ev) {\n        if (!helper.is(':visible')) {\n          return;\n        }\n        if ($(\"#debug-tabs\").position().top < 0) {\n          helper.addClass('fixed');\n          tab_web.addClass('fixed');\n        } else {\n          helper.removeClass('fixed');\n          tab_web.removeClass('fixed');\n        }\n      });\n\n      // copy button\n      var input = helper.find('.copy-selector-input');\n      input.on('focus', function(ev) {\n        $(this).select();\n      });\n      helper.find('.copy-selector').on('click', function(ev) {\n        if (!current_path) {\n          return;\n        }\n        if (input.is(':visible')) {\n          input.hide();\n          helper.find('.element').show();\n        } else {\n          helper.find('.element').hide();\n          input.val(merge_pattern(current_path)).show();\n        }\n      });\n \n      // add button\n      helper.find('.add-to-editor').on('click', function(ev) {\n        Debugger.python_editor_replace_selection(merge_pattern(current_path));\n      });\n    },\n    clear: function() {\n      current_path = null;\n      helper.hide();\n      helper.removeClass('fixed');\n      tab_web.removeClass('fixed');\n      helper.find('.element').remove();\n    },\n    enable: function() {\n      helper.show();\n      helper.find('.copy-selector-input').hide();\n      if ($(\"#debug-tabs\").position().top < 0) {\n        helper.addClass('fixed');\n        tab_web.addClass('fixed');\n      } else {\n        helper.removeClass('fixed');\n        tab_web.removeClass('fixed');\n      }\n    },\n  }\n})();\n\nwindow.Debugger = (function() {\n  var tmp_div = $('<div>');\n  function escape(text) {\n    return tmp_div.text(text).html();\n  }\n\n  return {\n    init: function() {\n      //init resizer\n      this.splitter = $(\".debug-panel:not(:first)\").splitter().data('splitter')\n          .trigger('init')\n          .on('resize-start', function() {\n            $('#left-area .overlay').show();\n          })\n          .on('resize-end', function() {\n            $('#left-area .overlay').hide();\n          });\n      \n\n      $('#task-panel').height('100%').width('100%').split({orientation: 'horizontal', limit: 50, position: '40%'});\n      $('#debug-tabs').height('100%').width('100%').split({orientation: 'horizontal', limit: 50, position: '40%'});\n\n      //codemirror\n      CodeMirror.keyMap.basic.Tab = 'indentMore';\n      this.init_python_editor($(\"#python-editor\"));\n      this.init_task_editor($(\"#task-editor\"));\n      this.bind_debug_tabs();\n      this.bind_run();\n      this.bind_save();\n      this.bind_others();\n\n      // css selector helper\n      SelectorHelper.init();\n    },\n\n    not_saved: false,\n    init_python_editor: function($el) {\n      var _this = this;\n      this.python_editor_elem = $el;\n      var cm = this.python_editor = CodeMirror($el[0], {\n        value: script_content,\n        mode: \"python\",\n        lineNumbers: true,\n        indentUnit: 4,\n        lineWrapping: true,\n        styleActiveLine: true,\n        autofocus: true\n      });\n      cm.on('focus', function() {\n        $el.addClass(\"focus\");\n      });\n      cm.on('blur', function() {\n        $el.removeClass(\"focus\");\n      });\n      cm.on('change', function() {\n        _this.not_saved = true;\n      });\n      window.addEventListener('beforeunload', function(e) {\n        if (_this.not_saved) {\n          var returnValue = \"You have not saved changes.\";\n          (e || window.event).returnValue = returnValue;\n          return returnValue;\n        }\n      });\n    },\n\n    python_editor_replace_selection: function(content) {\n      this.python_editor.getDoc().replaceSelection(content);\n    },\n\n    auto_format: function(cm) {\n      var pos = cm.getCursor(true);\n      CodeMirror.commands.selectAll(cm);\n      cm.autoFormatRange(cm.getCursor(true), cm.getCursor(false));\n      cm.setCursor(pos);\n    },\n\n    format_string: function(value, mode) {\n      var div = document.createElement('div');\n      var cm = CodeMirror(div, {\n        value: value,\n        mode: mode\n      });\n      this.auto_format(cm);\n      return cm.getDoc().getValue();\n    },\n\n    init_task_editor: function($el) {\n      var cm = this.task_editor = CodeMirror($el[0], {\n        value: task_content,\n        mode: \"application/json\",\n        indentUnit: 2,\n        lineWrapping: true,\n        styleActiveLine: true,\n        lint: true\n      });\n      this.auto_format(cm);\n      cm.getDoc().clearHistory();\n      cm.on('focus', function() {\n        $el.addClass(\"focus\");\n      });\n      cm.on('blur', function() {\n        $el.removeClass(\"focus\");\n      });\n    },\n\n    bind_debug_tabs: function() {\n      var _this = this;\n      $('#tab-control > li[data-id]').on('click', function() {\n        $('#tab-control > li[data-id]').removeClass('active');\n        var name = $(this).addClass('active').data('id');\n        $('#debug-tabs .tab').hide();\n        $('#debug-tabs #'+name).show();\n      });\n      $(\"#tab-control li[data-id=tab-html]\").on('click', function() {\n        if (!!!$(\"#tab-html\").data(\"format\")) {\n          var html_styled = \"\";\n          CodeMirror.runMode(_this.format_string($(\"#tab-html pre\").text(), 'text/html'), 'text/html',\n                             function(text, classname) {\n                               if (classname)\n                                 html_styled += '<span class=\"cm-'+classname+'\">'+escape(text)+'</span>';\n                               else\n                                 html_styled += escape(text);\n                             });\n          $(\"#tab-html pre\").html(html_styled);\n          $(\"#tab-html\").data(\"format\", true);\n        }\n      });\n    },\n\n    bind_run: function() {\n      var _this = this;\n      $('#run-task-btn').on('click', function() {\n        _this.run();\n      });\n      $('#undo-btn').on('click', function(ev) {\n        _this.task_editor.execCommand('undo');\n      });\n      $('#redo-btn').on('click', function(ev) {\n        _this.task_editor.execCommand('redo');\n      });\n    },\n\n    bind_save: function() {\n      var _this = this;\n      $('#save-task-btn').on('click', function() {\n        var script = _this.python_editor.getDoc().getValue();\n        $('#right-area .overlay').show();\n        $.ajax({\n          type: \"POST\",\n          url: location.pathname+'/save',\n          data: {\n            script: script\n          },\n          success: function(data) {\n            console.log(data);\n            _this.python_log('');\n            _this.python_log(\"saved!\");\n            _this.not_saved = false;\n            $('#right-area .overlay').hide();\n          },\n          error: function(xhr, textStatus, errorThrown) {\n            console.log(xhr, textStatus, errorThrown);\n            _this.python_log(\"save error!\\n\"+xhr.responseText);\n            $('#right-area .overlay').hide();\n          }\n        });\n      });\n    },\n\n    bind_follows: function() {\n      var _this = this;\n      $('.newtask').on('click', function() {\n        if ($(this).next().hasClass(\"task-show\")) {\n          $(this).next().remove();\n          return;\n        }\n        var task = $(this).after('<div class=\"task-show\"><pre class=\"cm-s-default\"></pre></div>').data(\"task\");\n        task = JSON.stringify(window.newtasks[task], null, '  ');\n        CodeMirror.runMode(task, 'application/json', $(this).next().find('pre')[0]);\n      });\n      \n      $('.newtask .task-run').on('click', function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        let task_id = $(this).parents('.newtask').data(\"task\");\n        let task = window.newtasks[task_id];\n        _this.task_editor.setValue(JSON.stringify(task, null, '  '));\n        _this.task_updated(task);\n        _this.run();\n      });\n    },\n\n    task_updated: function task_updated(task) {\n      $('#history-wrap').hide();\n      if (task.project && task.taskid) {\n        $.ajax({\n          url: `/task/${task.project}:${task.taskid}.json`,\n          success: (data) => {\n            if (!data.code && !data.error) {\n              $('#history-link').attr('href', `/task/${task.project}:${task.taskid}`).text(`status: ${data.status_string}`);\n              $('#history-wrap').show();\n            }\n          }\n        })\n      }\n    },\n\n    bind_others: function() {\n      var _this = this;\n      $('#python-log-show').on('click', function() {\n        if ($('#python-log pre').is(\":visible\")) {\n          $('#python-log pre').hide();\n          $(this).height(8);\n        } else {\n          $('#python-log pre').show();\n          $(this).height(0);\n        }\n      });\n      $('.webdav-btn').on('click', function() {\n        _this.toggle_webdav_mode(this);\n      })\n    },\n\n    render_html: function(html, base_url, block_script=true, block_iframe=true) {\n      if (html === undefined) {\n        html = '';\n      }\n      let dom = (new DOMParser()).parseFromString(html, \"text/html\");\n\n      $(dom).find('base').remove();\n      $(dom).find('head').prepend('<base>');\n      $(dom).find('base').attr('href', base_url);\n\n      if (block_script) {\n        $(dom).find('script').attr('type', 'text/plain');\n      }\n      if (block_iframe) {\n        $(dom).find('iframe[src]').each((i, e) => {\n          e = $(e);\n          e.attr('__src', e.attr('src'))\n          e.attr('src', encodeURI('data:text/html;,<h1>iframe blocked</h1>'));\n        });\n      }\n\n      return dom.documentElement.innerHTML;\n    },\n\n    run: function() {\n      var script = this.python_editor.getDoc().getValue();\n      var task = this.task_editor.getDoc().getValue();\n      var _this = this;\n\n      // reset\n      SelectorHelper.clear();\n      $(\"#tab-web .iframe-box\").html('');\n      $(\"#tab-html pre\").html('');\n      $('#tab-follows').html('');\n      $(\"#tab-control li[data-id=tab-follows] .num\").hide();\n      $('#python-log').hide();\n      $('#left-area .overlay').show();\n\n      $.ajax({\n        type: \"POST\",\n        url: location.pathname+'/run',\n        data: {\n          webdav_mode: _this.webdav_mode,\n          script: _this.webdav_mode ? '' : script,\n          task: task\n        },\n        success: function(data) {\n          console.log(data);\n          $('#left-area .overlay').hide();\n\n          //web\n          $(\"#tab-web .iframe-box\").html('<iframe src=\"/blank.html\" sandbox=\"allow-same-origin allow-scripts\"></iframe>');\n          const iframe = $(\"#tab-web iframe\")[0];\n          const content_type = data.fetch_result.headers && data.fetch_result.headers['Content-Type'] && data.fetch_result.headers['Content-Type'] || \"text/plain\";\n\n          //html\n          $(\"#tab-html pre\").text(data.fetch_result.content);\n          $(\"#tab-html\").data(\"format\", true);\n\n          let iframe_content = null;\n          if (content_type.indexOf('application/json') == 0) {\n            try {\n              let content = JSON.parse(data.fetch_result.content);\n              content = JSON.stringify(content, null, '  ');\n              content = \"<html><pre>\"+content+\"</pre></html>\";\n              iframe_content = _this.render_html(content, data.fetch_result.url, true, true, false);\n            } catch (e) {\n              iframe_content = \"data:,Content-Type:\"+content_type+\" parse error.\";\n            }\n          } else if (content_type.indexOf(\"text/html\") == 0) {\n            $(\"#tab-html\").data(\"format\", false);\n            iframe_content = _this.render_html(data.fetch_result.content, data.fetch_result.url, true, true, false);\n          } else if (content_type.indexOf(\"text\") == 0) {\n            iframe_content = \"data:\"+content_type+\",\"+data.fetch_result.content;\n          } else if (data.fetch_result.dataurl) {\n            iframe_content = data.fetch_result.dataurl\n          } else {\n            iframe_content = \"data:,Content-Type:\"+content_type;\n          }\n\n          const doc = iframe.contentDocument;\n          doc.open(\"text/html\", \"replace\");\n          doc.write(iframe_content)\n          doc.close();\n          doc.onreadystatechange = () => {\n            if (doc.readyState === 'complete') {\n        //      console.log(\"height is:\" + doc.body.scrollHeight);\n              //$(\"#tab-web iframe\").height(doc.body.scrollHeight + 60);\n              //$(\"#tab-web iframe\").height('100%');\n            }\n      };\n\n          //follows\n          $('#tab-follows').html('');\n          var elem = $(\"#tab-control li[data-id=tab-follows] .num\");\n\n          var newtask_template = '<div class=\"newtask\" data-task=\"__task__\"><span class=\"task-callback\">__callback__</span> &gt; <span class=\"task-url\">__url__</span><div class=\"task-run\"><i class=\"fa fa-play\"></i></div><div class=\"task-more\"> <i class=\"fa fa-ellipsis-h\"></i> </div></div>';\n          if (data.follows.length > 0) {\n            elem.text(data.follows.length).show();\n            var all_content = \"\";\n            window.newtasks = {};\n            $.each(data.follows, function(i, task) {\n              var callback = task.process;\n              callback = callback && callback.callback || '__call__';\n              var content = newtask_template.replace('__callback__', callback);\n              content = content.replace('__url__', task.url || '<span class=\"error\">no_url!</span>');\n              all_content += content.replace('__task__', i);\n              window.newtasks[i] = task;\n            });\n            $('#tab-follows').append(all_content);\n            _this.bind_follows();\n          } else {\n            elem.hide();\n          }\n\n          //messages\n          $('#tab-messages pre').html('');\n          if (data.messages.length > 0) {\n            $(\"#tab-control li[data-id=tab-messages] .num\").text(data.messages.length).show();\n            var messages = JSON.stringify(data.messages, null, '  ');\n            CodeMirror.runMode(messages, 'application/json', $('#tab-messages pre')[0]);\n            $('#tab-messages')[0]\n          } else {\n            $(\"#tab-control li[data-id=tab-messages] .num\").hide();\n          }\n\n          $(\"#tab-control li.active\").click();\n\n          // logs\n          _this.python_log(data.logs);\n        },\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr, textStatus, errorThrown);\n          _this.python_log('error: '+textStatus);\n          $('#left-area .overlay').hide();\n        }\n      });\n    },\n\n    python_log: function(text) {\n      if (text) {\n        $('#python-log pre').text(text);\n        $('#python-log pre, #python-log').show();\n        $('#python-log-show').height(0);\n      } else {\n        $('#python-log pre, #python-log').hide();\n      }\n    },\n\n    webdav_mode: false,\n    toggle_webdav_mode: function(button) {\n      if (!this.webdav_mode) {\n        if (this.not_saved) {\n            if (!confirm(\"You have not saved changes. Ignore changes and switch to WebDav mode.\")) {\n            return;\n          }\n          this.not_saved = false;\n        }\n        this.python_editor_elem.hide();\n        this.splitter.trigger('fullsize', 'prev');\n        $(button).addClass('active');\n        this.webdav_mode = !this.webdav_mode;\n      } else {\n        // leaving webdav mode, reload script\n        var _this = this;\n        $.ajax({\n          type: \"GET\",\n          url: location.pathname + '/get',\n          success: function (data) {\n            _this.splitter.trigger('init');\n            _this.python_editor_elem.show();\n            _this.python_editor.setValue(data.script);\n            _this.not_saved = false;\n            $(button).removeClass('active');\n            _this.webdav_mode = !_this.webdav_mode;\n          },\n          error: function() {\n            alert('Loading script from database error. Script may out-of-date.');\n            _this.python_editor_elem.show();\n            _this.splitter.trigger('init');\n            $(button).removeClass('active');\n            _this.webdav_mode = !_this.webdav_mode;\n          },\n        });\n      }\n    },\n  };\n})();\n\nDebugger.init();\n\n\n\n// WEBPACK FOOTER //\n// ./src/debug.js","// vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:\n// Author: Binux<i@binux.me>\n//         http://binux.me\n// Created on 2014-02-23 01:35:35\n// from: https://github.com/jsbin/jsbin\n\n$.fn.splitter = function (_type) {\n  var $document = $(document),\n  $blocker = $('<div class=\"block\"></div>'),\n  $body = $('body');\n  // blockiframe = $blocker.find('iframe')[0];\n\n  var splitterSettings = JSON.parse(localStorage.getItem('splitterSettings') || '[]');\n  return this.each(function () {\n    var $el = $(this),\n    $originalContainer = $(this),\n    guid = $.fn.splitter.guid++,\n    $parent = $el.parent(),\n    type = _type || 'x',\n    $prev = type === 'x' ? $el.prevAll(':visible:first') : $el.nextAll(':visible:first'),\n    $handle = $('<div class=\"resize\"></div>'),\n    dragging = false,\n    width = $parent.width(),\n    parentOffset = $parent.offset(),\n    left = parentOffset.left,\n    top = parentOffset.top, // usually zero :(\n    props = {\n      x: {\n        display: 'block',\n        currentPos: $parent.offset().left,\n        multiplier: 1,\n        cssProp: 'left',\n        otherCssProp: 'right',\n        size: $parent.width(),\n        sizeProp: 'width',\n        moveProp: 'pageX',\n        init: {\n          top: 0,\n          bottom: 0,\n          width: 8,\n          'margin-left': '-4px',\n          height: '100%',\n          left: 'auto',\n          right: 'auto',\n          opacity: 0,\n          position: 'absolute',\n          cursor: 'ew-resize',\n          // 'border-top': '0',\n          'border-left': '1px solid rgba(218, 218, 218, 0.5)',\n          'z-index': 99999\n        }\n      },\n      y: {\n        display: 'block',\n        currentPos: $parent.offset().top,\n        multiplier: -1,\n        size: $parent.height(),\n        cssProp: 'bottom',\n        otherCssProp: 'top',\n        sizeProp: 'height',\n        moveProp: 'pageY',\n        init: {\n          top: 'auto',\n          cursor: 'ns-resize',\n          bottom: 'auto',\n          height: 8,\n          width: '100%',\n          left: 0,\n          right: 0,\n          opacity: 0,\n          position: 'absolute',\n          border: 0,\n          // 'border-top': '1px solid rgba(218, 218, 218, 0.5)',\n          'z-index': 99999\n        }\n      }\n    },\n    refreshTimer = null,\n    settings = splitterSettings[guid] || {};\n\n    var tracker = {\n      down: { x: null, y: null },\n      delta: { x: null, y: null },\n      track: false,\n      timer: null\n    };\n    $handle.bind('mousedown', function (event) {\n      tracker.down.x = event.pageX;\n      tracker.down.y = event.pageY;\n      tracker.delta = { x: null, y: null };\n      tracker.target = $handle[type == 'x' ? 'height' : 'width']() * 0.25;\n    });\n\n    $document.bind('mousemove', function (event) {\n      if (dragging) {\n        tracker.delta.x = tracker.down.x - event.pageX;\n        tracker.delta.y = tracker.down.y - event.pageY;\n        clearTimeout(tracker.timer);\n        tracker.timer = setTimeout(function () {\n          tracker.down.x = event.pageX;\n          tracker.down.y = event.pageY;\n        }, 250);\n        //disable change to y\n        //var targetType = type == 'x' ? 'y' : 'x';\n        //if (Math.abs(tracker.delta[targetType]) > tracker.target) {\n          //$handle.trigger('change', targetType, event[props[targetType].moveProp]);\n          //tracker.down.x = event.pageX;\n          //tracker.down.y = event.pageY;\n        //}\n      }\n    });\n\n    function moveSplitter(pos) {\n      if (type === 'y') {\n        pos -= top;\n      }\n      var v = pos - props[type].currentPos,\n      split = 100 / props[type].size * v,\n      delta = (pos - settings[type]) * props[type].multiplier,\n      prevSize = $prev[props[type].sizeProp](),\n      elSize = $el[props[type].sizeProp]();\n\n      if (type === 'y') {\n        split = 100 - split;\n      }\n\n      // if prev panel is too small and delta is negative, block\n      if (prevSize < 100 && delta < 0) {\n        // ignore\n      } else if (elSize < 100 && delta > 0) {\n        // ignore\n      } else {\n        // allow sizing to happen\n        $el.css(props[type].cssProp, split + '%');\n        $prev.css(props[type].otherCssProp, (100 - split) + '%');\n        var css = {};\n        css[props[type].cssProp] = split + '%';\n        $handle.css(css);\n        settings[type] = pos;\n        splitterSettings[guid] = settings;\n        localStorage.setItem('splitterSettings', JSON.stringify(splitterSettings));\n\n        // wait until animations have completed!\n        if (moveSplitter.timer) clearTimeout(moveSplitter.timer);\n        moveSplitter.timer = setTimeout(function () {\n          $document.trigger('sizeeditors');\n        }, 120);\n      }\n    }\n\n    function resetPrev() {\n      $prev = type === 'x' ? $handle.prevAll(':visible:first') : $handle.nextAll(':visible:first');\n    }\n\n    $document.bind('mouseup touchend', function () {\n      if (dragging) {\n        dragging = false;\n        $handle.trigger('resize-end');\n        $blocker.remove();\n        // $handle.css( 'opacity', '0');\n        $body.removeClass('dragging');\n      }\n    }).bind('mousemove touchmove', function (event) {\n      if (dragging) {\n        moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\n      }\n    });\n\n    $blocker.bind('mousemove touchmove', function (event) {\n      if (dragging) {\n        moveSplitter(event[props[type].moveProp] || event.originalEvent.touches[0][props[type].moveProp]);\n      }\n    });\n\n    $handle.bind('mousedown touchstart', function (e) {\n      dragging = true;\n      $handle.trigger('resize-start');\n      $body.append($blocker).addClass('dragging');\n      props[type].size = $parent[props[type].sizeProp]();\n      props[type].currentPos = 0; // is this really required then?\n\n      resetPrev();\n      e.preventDefault();\n    });\n\n    /*\n       .hover(function () {\n       $handle.css('opacity', '1');\n       }, function () {\n       if (!dragging) {\n       $handle.css('opacity', '0');\n       }\n       })\n       */\n\n    $handle.bind('fullsize', function(event, panel) {\n      if (panel === undefined) {\n        panel = 'prev';\n      }\n      var split = 0;\n      if (panel === 'prev') {\n        split = 100;\n      }\n      $el.css(props[type].cssProp, split + '%');\n      $prev.css(props[type].otherCssProp, (100 - split) + '%');\n      $handle.hide();\n    });\n\n    $handle.bind('init', function (event, x) {\n      $handle.css(props[type].init);\n      props[type].size = $parent[props[type].sizeProp]();\n      resetPrev();\n\n      // can only be read at init\n      top = $parent.offset().top;\n\n      $blocker.css('cursor', type == 'x' ? 'ew-resize' : 'ns-resize');\n\n      if (type == 'y') {\n        $el.css('border-right', 0);\n        $prev.css('border-left', 0);\n        $prev.css('border-top', '2px solid #ccc');\n      } else {\n        // $el.css('border-right', '1px solid #ccc');\n        $el.css('border-top', 0);\n        // $prev.css('border-right', '2px solid #ccc');\n      }\n\n      if ($el.is(':hidden')) {\n        $handle.hide();\n      } else {\n        if ($prev.length) {\n          $el.css('border-' + props[type].cssProp, '1px solid #ccc');\n        } else {\n          $el.css('border-' + props[type].cssProp, '0');\n        }\n        moveSplitter(x !== undefined ? x : settings[type] || $el.offset()[props[type].cssProp]);\n      }\n    }); //.trigger('init', settings.x || $el.offset().left);\n\n    $handle.bind('change', function (event, toType, value) {\n      $el.css(props[type].cssProp, '0');\n      $prev.css(props[type].otherCssProp, '0');\n      $el.css('border-' + props[type].cssProp, '0');\n\n      if (toType === 'y') {\n        // 1. drop inside of a new div that encompases the elements\n        $el = $el.find('> *');\n        $handle.appendTo($prev);\n        $el.appendTo($prev);\n        $prev.css('height', '100%');\n        $originalContainer.hide();\n        $handle.css('margin-left', 0);\n        $handle.css('margin-top', 5);\n\n        $handle.addClass('vertical');\n\n        delete settings.x;\n\n        $originalContainer.nextAll(':visible:first').trigger('init');\n        // 2. change splitter to the right to point to new block div\n      } else {\n        $el = $prev;\n        $prev = $tmp;\n\n        $el.appendTo($originalContainer);\n        $handle.insertBefore($originalContainer);\n        $handle.removeClass('vertical');\n        $el.css('border-top', 0);\n        $el = $originalContainer;\n        $originalContainer.show();\n        $handle.css('margin-top', 0);\n        $handle.css('margin-left', -4);\n        delete settings.y;\n\n        setTimeout(function() {\n          $originalContainer.nextAll(':visible:first').trigger('init');\n        }, 0);\n      }\n\n      resetPrev();\n\n      type = toType;\n\n      // if (type == 'y') {\n      // FIXME $prev should check visible\n      var $tmp = $el;\n      $el = $prev;\n      $prev = $tmp;\n      // } else {\n\n      // }\n\n      $el.css(props[type].otherCssProp, '0');\n      $prev.css(props[type].cssProp, '0');\n      // TODO\n      // reset top/bottom positions\n      // reset left/right positions\n\n      if ($el.is(':visible')) {\n        // find all other handles and recalc their height\n        if (type === 'y') {\n          var otherhandles = $el.find('.resize');\n\n          otherhandles.each(function (i) {\n            // find the top of the\n            var $h = $(this);\n            if (this === $handle[0]) {\n              // ignore\n            } else {\n              // TODO change to real px :(\n              $h.trigger('init', 100 / (otherhandles - i - 1));\n            }\n          });\n        }\n        $handle.trigger('init', value || $el.offset()[props[type].cssProp] || props[type].size / 2);\n      }\n    });\n\n\n    $prev.css('width', 'auto');\n    $prev.css('height', 'auto');\n    $el.data('splitter', $handle);\n    $el.before($handle);\n\n    // if (settings.y) {\n    //   $handle.trigger('change', 'y');\n    // }\n  });\n};\n\n$.fn.splitter.guid = 0;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/splitter.js","/*!\n * JQuery Spliter Plugin version 0.27.1\n * Copyright (C) 2010-2018 Jakub Jankiewicz <http://jcubic.pl/me>\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n(function($, undefined) {\n    var count = 0;\n    var splitter_id = null;\n    var splitters = [];\n    var current_splitter = null;\n    $.fn.split = function(options) {\n        var data = this.data('splitter');\n        if (data) {\n            return data;\n        }\n        var panel_1;\n        var panel_2;\n        var settings = $.extend({\n            limit: 100,\n            orientation: 'horizontal',\n            position: '50%',\n            invisible: false,\n            onDragStart: $.noop,\n            onDragEnd: $.noop,\n            onDrag: $.noop,\n            percent: false\n        }, options || {});\n        this.settings = settings;\n        var cls;\n        var children = this.children();\n        if (settings.orientation == 'vertical') {\n            panel_1 = children.first().addClass('left_panel');\n            panel_2 = panel_1.next().addClass('right_panel');\n            cls = 'vsplitter';\n        } else if (settings.orientation == 'horizontal') {\n            panel_1 = children.first().addClass('top_panel');\n            panel_2 = panel_1.next().addClass('bottom_panel');\n            cls = 'hsplitter';\n        }\n        if (settings.invisible) {\n            cls += ' splitter-invisible';\n        }\n        var width = this.width();\n        var height = this.height();\n        var id = count++;\n        this.addClass('splitter_panel');\n        var splitter = $('<div/>').addClass(cls).bind('mouseenter touchstart', function() {\n            splitter_id = id;\n        }).bind('mouseleave touchend', function() {\n            splitter_id = null;\n        }).insertAfter(panel_1);\n        var position;\n\n        function get_position(position) {\n            if (typeof position === 'number') {\n                return position;\n            } else if (typeof position === 'string') {\n                var match = position.match(/^([0-9\\.]+)(px|%)$/);\n                if (match) {\n                    if (match[2] == 'px') {\n                        return +match[1];\n                    } else {\n                        if (settings.orientation == 'vertical') {\n                            return (width * +match[1]) / 100;\n                        } else if (settings.orientation == 'horizontal') {\n                            return (height * +match[1]) / 100;\n                        }\n                    }\n                } else {\n                    //throw position + ' is invalid value';\n                }\n            } else {\n                //throw 'position have invalid type';\n            }\n        }\n\n        function set_limit(limit) {\n            if(!isNaN(parseFloat(limit)) && isFinite(limit)){\n                return {\n                    leftUpper: limit,\n                    rightBottom: limit\n                };\n            }\n            return limit;\n        }\n\n        var self = $.extend(this, {\n            refresh: function() {\n                var new_width = this.width();\n                var new_height = this.height();\n                if (width != new_width || height != new_height) {\n                    width = this.width();\n                    height = this.height();\n                    self.position(position);\n                }\n            },\n            option: function(name, value) {\n                if (name === 'position') {\n                    return self.position(value);\n                } else if (typeof value === 'undefined') {\n                    return settings[name];\n                } else {\n                    settings[name] = value;\n                }\n                return self;\n            },\n            position: (function() {\n                if (settings.orientation == 'vertical') {\n                    return function(n, silent) {\n                        if (n === undefined) {\n                            return position;\n                        } else {\n                            position = get_position(n);\n                            var sw = splitter.width();\n                            var sw2 = sw/2, pw;\n                            var width = self.width();\n                            if (settings.invisible) {\n                                pw = panel_1.width(position).outerWidth();\n                                panel_2.width(width - pw);\n                                splitter.css('left', pw - sw2);\n                            } else {\n                                if (settings.percent) {\n                                    var w1 = (position - sw2) / width * 100;\n                                    pw = panel_1.css('width', w1 + '%').outerWidth();\n                                    panel_2.css('width', (width-pw-sw) / width * 100 + '%');\n                                    splitter.css('left', (pw / width * 100) + '%');\n                                } else {\n                                    pw = panel_1.css('width', position - sw2).outerWidth();\n                                    panel_2.width(width - pw - sw);\n                                    splitter.css('left', pw);\n                                }\n                            }\n                            panel_1.find('.splitter_panel').eq(0).height(self.height());\n                            panel_2.find('.splitter_panel').eq(0).height(self.height());\n                        }\n                        if (!silent) {\n                            self.trigger('splitter.resize');\n                            self.find('.splitter_panel').trigger('splitter.resize');\n                        }\n                        return self;\n                    };\n                } else if (settings.orientation == 'horizontal') {\n                    return function(n, silent) {\n                        if (n === undefined) {\n                            return position;\n                        } else {\n                            position = get_position(n);\n                            var sw = splitter.height();\n                            var sw2 = sw / 2, pw;\n                            var height = self.height();\n                            if (settings.invisible) {\n                                pw = panel_1.height(position).outerHeight();\n                                panel_2.height(height - pw);\n                                splitter.css('top', pw - sw2);\n                            } else if (settings.percent) {\n                                var h1 = (position - sw2) / height * 100;\n                                pw = panel_1.css('height', h1 + '%').outerHeight();\n                                panel_2.css('height', ((height - pw - sw) / height * 100) + '%');\n                                splitter.css('top', (pw / height * 100) + '%');\n                            } else {\n                                pw = panel_1.height(position - sw2).outerHeight();\n                                panel_2.height(height - pw - sw);\n                                splitter.css('top', pw);\n                            }\n                        }\n                        if (!silent) {\n                            self.trigger('splitter.resize');\n                            self.find('.splitter_panel').trigger('splitter.resize');\n                        }\n                        return self;\n                    };\n                } else {\n                    return $.noop;\n                }\n            })(),\n            orientation: settings.orientation,\n            limit: set_limit(settings.limit),\n            isActive: function() {\n                return splitter_id === id;\n            },\n            destroy: function() {\n                self.removeClass('splitter_panel');\n                splitter.unbind('mouseenter');\n                splitter.unbind('mouseleave');\n                splitter.unbind('touchstart');\n                splitter.unbind('touchmove');\n                splitter.unbind('touchend');\n                splitter.unbind('touchleave');\n                splitter.unbind('touchcancel');\n                if (settings.orientation == 'vertical') {\n                    panel_1.removeClass('left_panel');\n                    panel_2.removeClass('right_panel');\n                } else if (settings.orientation == 'horizontal') {\n                    panel_1.removeClass('top_panel');\n                    panel_2.removeClass('bottom_panel');\n                }\n                self.unbind('splitter.resize');\n                self.trigger('splitter.resize');\n                self.find('.splitter_panel').trigger('splitter.resize');\n                splitters[id] = null;\n                count--;\n                splitter.remove();\n                self.removeData('splitter');\n                var not_null = false;\n                for (var i=splitters.length; i--;) {\n                    if (splitters[i] !== null) {\n                        not_null = true;\n                        break;\n                    }\n                }\n                //remove document events when no splitters\n                if (!not_null) {\n                    $(document.documentElement).unbind('.splitter');\n                    $(window).unbind('resize.splitter');\n                    splitters = [];\n                    count = 0;\n                }\n            }\n        });\n        self.bind('splitter.resize', function(e) {\n            var pos = self.position();\n            if (self.orientation == 'vertical' &&\n                pos > self.width()) {\n                pos = self.width() - self.limit.rightBottom-1;\n            } else if (self.orientation == 'horizontal' &&\n                       pos > self.height()) {\n                pos = self.height() - self.limit.rightBottom-1;\n            }\n            if (pos < self.limit.leftUpper) {\n                pos = self.limit.leftUpper + 1;\n            }\n            e.stopPropagation();\n            self.position(pos, true);\n        });\n        //inital position of splitter\n        var pos;\n        if (settings.orientation == 'vertical') {\n            if (pos > width-settings.limit.rightBottom) {\n                pos = width-settings.limit.rightBottom;\n            } else {\n                pos = get_position(settings.position);\n            }\n        } else if (settings.orientation == 'horizontal') {\n            //position = height/2;\n            if (pos > height-settings.limit.rightBottom) {\n                pos = height-settings.limit.rightBottom;\n            } else {\n                pos = get_position(settings.position);\n            }\n        }\n        if (pos < settings.limit.leftUpper) {\n            pos = settings.limit.leftUpper;\n        }\n        self.position(pos, true);\n        var parent = this.closest('.splitter_panel');\n        if (parent.length) {\n            this.height(parent.height());\n        }\n        // bind events to document if no splitters\n        if (splitters.filter(Boolean).length === 0) {\n            $(window).bind('resize.splitter', function() {\n                $.each(splitters, function(i, splitter) {\n                    if (splitter) {\n                        splitter.refresh();\n                    }\n                });\n            });\n            $(document.documentElement).on('mousedown.splitter touchstart.splitter', function(e) {\n                if (splitter_id !== null) {\n                    e.preventDefault();\n                    current_splitter = splitters[splitter_id];\n                    setTimeout(function() {\n                        $('<div class=\"splitterMask\"></div>').\n                            css('cursor', current_splitter.children().eq(1).css('cursor')).\n                            insertAfter(current_splitter);\n                    });\n                    current_splitter.settings.onDragStart(e);\n                }\n            }).bind('mouseup.splitter touchend.splitter touchleave.splitter touchcancel.splitter', function(e) {\n                if (current_splitter) {\n                    setTimeout(function() {\n                        $('.splitterMask').remove();\n                    });\n                    current_splitter.settings.onDragEnd(e);\n                    current_splitter = null;\n                }\n            }).bind('mousemove.splitter touchmove.splitter', function(e) {\n                if (current_splitter !== null) {\n                    var leftUpperLimit = current_splitter.limit.leftUpper;\n                    var rightBottomLimit = current_splitter.limit.rightBottom;\n                    var offset = current_splitter.offset();\n                    if (current_splitter.orientation == 'vertical') {\n                        var pageX = e.pageX;\n                        if(e.originalEvent && e.originalEvent.changedTouches){\n                          pageX = e.originalEvent.changedTouches[0].pageX;\n                        }\n                        var x = pageX - offset.left;\n                        if (x <= current_splitter.limit.leftUpper) {\n                            x = current_splitter.limit.leftUpper + 1;\n                        } else if (x >= current_splitter.width() - rightBottomLimit) {\n                            x = current_splitter.width() - rightBottomLimit - 1;\n                        }\n                        if (x > current_splitter.limit.leftUpper &&\n                            x < current_splitter.width()-rightBottomLimit) {\n                            current_splitter.position(x, true);\n                            current_splitter.trigger('splitter.resize');\n                            current_splitter.find('.splitter_panel').\n                                trigger('splitter.resize');\n                            //e.preventDefault();\n                        }\n                    } else if (current_splitter.orientation == 'horizontal') {\n                        var pageY = e.pageY;\n                        if(e.originalEvent && e.originalEvent.changedTouches){\n                          pageY = e.originalEvent.changedTouches[0].pageY;\n                        }\n                        var y = pageY-offset.top;\n                        if (y <= current_splitter.limit.leftUpper) {\n                            y = current_splitter.limit.leftUpper + 1;\n                        } else if (y >= current_splitter.height() - rightBottomLimit) {\n                            y = current_splitter.height() - rightBottomLimit - 1;\n                        }\n                        if (y > current_splitter.limit.leftUpper &&\n                            y < current_splitter.height()-rightBottomLimit) {\n                            current_splitter.position(y, true);\n                            current_splitter.trigger('splitter.resize');\n                            current_splitter.find('.splitter_panel').\n                                trigger('splitter.resize');\n                            //e.preventDefault();\n                        }\n                    }\n                    current_splitter.settings.onDrag(e);\n                }\n            });//*/\n        }\n        splitters[id] = self;\n        self.data('splitter', self);\n        return self;\n    };\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./src/jquery.splitter.js","// vim: set et sw=2 ts=2 sts=2 ff=unix fenc=utf8:\n// Author: Binux<i@binux.me>\n//         http://binux.me\n// Created on 2013-11-11 18:50:58\n\nimport EventEmitter from 'events'\n\nfunction arrayEquals(a, b) {\n  if (!a || !b)\n    return false;\n  if (a.length != b.length)\n    return false;\n\n  for (var i = 0, l = a.length; i < l; i++) {\n    if (a[i] !== b[i])\n      return false;\n  }\n  return true;\n}\n\nfunction getOffset(elem) {\n  var top = 0;\n  var left = 0;\n  do {\n    if ( !isNaN( elem.offsetLeft) ) left += elem.offsetLeft;\n    if ( !isNaN( elem.offsetTop) ) top += elem.offsetTop;\n  } while( elem = elem.offsetParent )\n  return {top: top, left: left};\n}\n\nfunction merge_name(features) {\n  var element_name = '';\n  features.forEach(function(f) {\n    if (f.selected)\n      element_name += f.name;\n  })\n  return element_name;\n}\n\nfunction merge_pattern(path, end) {\n  var pattern = '';\n  var prev = null;\n  path.forEach(function(p, i) {\n    if (end >= 0 && i > end) {\n      return;\n    }\n    if (p.invalid) {\n      prev = null;\n    } else if (p.selected) {\n      if (prev) {\n        pattern += ' >';\n      }\n      var element_pattern = '';\n      p.features.forEach(function(f) {\n        if (f.selected) {\n          element_pattern += f.pattern;\n        }\n      });\n      if (element_pattern === '') {\n        element_pattern = '*';\n      }\n      pattern += ' '+element_pattern;\n      prev = p;\n    } else {\n      prev = null;\n    }\n  })\n  if (pattern === '') {\n    pattern = '*';\n  }\n  return pattern;\n}\n\n\nfunction path_info(doc, element) {\n  var path = [];\n  do {\n    var features = [];\n    // tagName\n    features.push({\n      name: element.tagName.toLowerCase(),\n      pattern: element.tagName.toLowerCase(),\n      selected: true,\n    });\n    // id\n    if (element.getAttribute('id')) {\n      features.push({\n        name: '#'+element.getAttribute('id'),\n        pattern: '#'+element.getAttribute('id'),\n        selected: true,\n      });\n    }\n    // class\n    if (element.classList.length > 0) {\n      for (var i=0; i<element.classList.length; i++) {\n        var class_name = element.classList[i];\n        features.push({\n          name: '.'+class_name,\n          pattern: '.'+class_name,\n          selected: true,\n        });\n      }\n    }\n    // rel, property\n    var allowed_attr_names = ('rel', 'property', 'itemprop');\n    for (var i=0, attrs = element.attributes; i < attrs.length; i++) {\n      if (allowed_attr_names.indexOf(attrs[i].nodeName) == -1) {\n        continue\n      }\n      features.push({\n        name: '['+attrs[i].nodeName+'='+JSON.stringify(attrs[i].nodeValue)+']',\n        pattern: '['+attrs[i].nodeName+'='+JSON.stringify(attrs[i].nodeValue)+']',\n        selected: true,\n      });\n    }\n\n    // get xpath\n    var siblings = element.parentNode.childNodes;\n    var xpath = element.tagName.toLowerCase();\n    for (var i=0, ix=0; siblings.length > 1 && i < siblings.length; i++) {\n      var sibling = siblings[i];\n      if (sibling === element) {\n        xpath += '['+(ix+1)+']';\n        break;\n      } else if (sibling.tagName == element.tagName) {\n        ix++;\n      }\n    }\n\n    // pack it up\n    path.push({\n      tag: element.tagName.toLowerCase(),\n      name: merge_name(features),\n      xpath: xpath,\n      selected: true,\n      invalid: element.tagName.toLowerCase() === 'tbody',\n      features: features,\n    });\n  } while (element = element.parentElement);\n\n  path.reverse();\n\n  // select elements\n  var selected_elements = doc.querySelectorAll(merge_pattern(path));\n  path.forEach(function(p, i) {\n    if (p.invalid)\n      return;\n    // select features\n    var feature_selected_elements = doc.querySelectorAll(merge_pattern(path, i));\n    p.features.forEach(function(f, fi) {\n      f.selected = false;\n      if (arrayEquals(feature_selected_elements,\n        doc.querySelectorAll(merge_pattern(path, i)))) {\n          return;\n        }\n      f.selected = true;\n    });\n    if (p.features.every(function(f) {\n      return !f.selected;\n    })) {\n      p.features[0].selected = true;\n    }\n    p.name = merge_name(p.features);\n  });\n\n  path.forEach(function(p, i) {\n    p.selected = false;\n    if (arrayEquals(selected_elements,\n      doc.querySelectorAll(merge_pattern(path)))) {\n        p.name = p.tag;\n        return;\n      }\n    p.selected = true;\n  });\n\n  return path;\n}\n\nexport default class CSSSelectorHelperServer extends EventEmitter {\n  constructor(window) {\n    super();\n\n    this.window = window;\n    this.document = window.document;\n\n    this.document.addEventListener(\"mouseover\", (ev) => {\n      this.overlay(ev.target);\n    });\n\n    this.document.addEventListener(\"click\", (ev) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n\n      this.emit('selector_helper_click', path_info(this.document, ev.target));\n    });\n  }\n\n  overlay(elements) {\n    if (typeof elements === 'string') {\n      elements = this.document.querySelectorAll(elements);\n    }\n    if (elements instanceof this.window.Element) {\n      elements = [elements];\n    }\n    [...this.document.querySelectorAll('.pyspider_overlay')].forEach((elem) => {\n      elem.remove();\n    });\n    [...elements].forEach((elem) => {\n      const offset = getOffset(elem);\n      const div = this.document.createElement(\"div\");\n      div.className = \"pyspider_overlay\";\n      div.setAttribute('style', 'z-index: 999999;background-color: rgba(255, 165, 0, 0.3);position: absolute;pointer-events: none;'\n        +'top: '+offset.top+'px;'\n          +'left:'+offset.left+'px;'\n          +'width: '+elem.offsetWidth+'px;'\n          +'height: '+elem.offsetHeight+'px;');\n      this.document.body.appendChild(div);\n    });\n  }\n\n  heightlight(elements) {\n    if (typeof elements === 'string') {\n      elements = this.document.querySelectorAll(elements);\n    }\n    console.log(elements);\n    if (elements instanceof this.window.Element) {\n      elements = [elements];\n    }\n    [...this.document.querySelectorAll('.pyspider_highlight')].forEach((elem) => {\n      elem.remove();\n    });\n    [...elements].forEach((elem) => {\n      const offset = getOffset(elem);\n      const div = this.document.createElement(\"div\");\n      div.className = \"pyspider_highlight\";\n      div.setAttribute('style', 'z-index: 888888;border: 2px solid #c00;position: absolute;pointer-events: none;'\n        +'top: '+(offset.top-2)+'px;'\n          +'left:'+(offset.left-2)+'px;'\n          +'width: '+elem.offsetWidth+'px;'\n          +'height: '+elem.offsetHeight+'px;');\n      this.document.body.appendChild(div);\n    });\n  }\n\n  getElementByXpath(path) {\n    return this.document.evaluate(path, this.document, null, this.window.XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/css_selector_helper.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/_events@1.1.1@events/events.js"],"sourceRoot":""}